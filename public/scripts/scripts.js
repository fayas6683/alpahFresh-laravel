function config($stateProvider,$urlRouterProvider,USER_ROLES){$urlRouterProvider.otherwise("/index"),$stateProvider.state("index",{url:"/index",templateUrl:"views/landing.html",controller:AboutCtrl,data:{pageTitle:"Silco",specialClass:"landing-page",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("about",{url:"/about",templateUrl:"views/about.html",controller:AboutCtrl,data:{pageTitle:"Silco",specialClass:"landing-page",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("products",{url:"/products",templateUrl:"views/products_front.html",controller:AboutCtrl,data:{pageTitle:"Products",specialClass:"landing-page",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("login",{url:"/login",templateUrl:"views/login.html",controller:LoginCtrl,data:{pageTitle:"Login",specialClass:"gray-bg",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("register",{url:"/register",templateUrl:"views/register.html",controller:RegisterCtrl,data:{pageTitle:"Register",specialClass:"gray-bg",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("forgotPassword",{url:"/forgotPassword/:code",templateUrl:"views/forgotPassword.html",controller:ForgetPasswordCtrl,data:{pageTitle:"Forgot Password",specialClass:"gray-bg",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("registerConfirmation",{url:"/registerConfirmation/:code",templateUrl:"views/registerConfirmation.html",controller:RegisterConfirmationCtrl,data:{pageTitle:"Register Confirmation",specialClass:"gray-bg",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("profile",{url:"/profile",templateUrl:"views/profile.html",controller:ProfileCtrl,data:{pageTitle:"Profile",authorizedRoles:[USER_ROLES.admin,USER_ROLES.staff,USER_ROLES.consumer]}}).state("search",{url:"/search",templateUrl:"views/productSearch.html",controller:SearchByTagsCtrl,data:{pageTitle:"search",authorizedRoles:[USER_ROLES.consumer]}}).state("tagSearch",{url:"/search/:tag",templateUrl:"views/productSearch.html",controller:SearchByTagsCtrl,data:{pageTitle:"tagSearch",authorizedRoles:[USER_ROLES.consumer]}}).state("staffManagement",{url:"/staffManagement",templateUrl:"views/staffManagement.html",controller:StaffManagementCtrl,data:{pageTitle:"Staff Management",authorizedRoles:[USER_ROLES.admin]}}).state("vendor",{url:"/vendor",templateUrl:"views/vendor.html",controller:VendorCtrl,data:{pageTitle:"Vendor",authorizedRoles:[USER_ROLES.admin]}}).state("checkout",{url:"/checkout",templateUrl:"views/checkOut.html",controller:CheckOutCtrl,data:{pageTitle:"checkout",authorizedRoles:[USER_ROLES.consumer]}}).state("invoice",{"abstract":!0,url:"/invoice",name:"invoice",templateUrl:"views/common/content.html",data:{pageTitle:"Invoice",authorizedRoles:[USER_ROLES.consumer,USER_ROLES.staff,USER_ROLES.admin]}}).state("invoice.orderId",{url:"/:orderId",templateUrl:"views/invoice.html",controller:InvoiceCtrl,data:{pageTitle:"invoice",authorizedRoles:[USER_ROLES.consumer,USER_ROLES.staff,USER_ROLES.admin]}}).state("categories",{url:"/categories",name:"categories",templateUrl:"views/categories.html",controller:CategoryCtrl,data:{pageTitle:"Categories",authorizedRoles:[USER_ROLES.admin]}}).state("cart",{url:"/cart",name:"cart",templateUrl:"views/cart.html",controller:CartCtrl,data:{pageTitle:"Cart",authorizedRoles:[USER_ROLES.consumer]}}).state("myOrders",{url:"/myOrders",name:"My Orders",templateUrl:"views/myOrder.html",controller:myOrderCtrl,data:{pageTitle:"My Orders",authorizedRoles:[USER_ROLES.consumer]}}).state("userManagement",{url:"/userManagement",templateUrl:"views/userManagements.html",controller:UserManagementsCtrl,data:{pageTitle:"User  Management",authorizedRoles:[USER_ROLES.admin]}}).state("userManagements_create",{url:"/userManagements_create",templateUrl:"views/userManagements_create.html",controller:NewUserManagementsCtrl,data:{pageTitle:"User Management create",authorizedRoles:[USER_ROLES.admin]}}).state("contactUs",{url:"/contactUs",templateUrl:"views/contactUs.html",controller:ContactUsCtrl,data:{pageTitle:"Contact Us",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("service",{url:"/service",templateUrl:"views/service.html",controller:ServiceCtrl,data:{pageTitle:"Service",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("product",{url:"/product",templateUrl:"views/product.html",controller:ProductCtrl,data:{pageTitle:"Product",authorizedRoles:[USER_ROLES.admin]}}).state("product_create",{url:"/product_create",name:"product",templateUrl:"views/productCreate.html",controller:ProductCreateCtrl,data:{pageTitle:"Product Create",authorizedRoles:[USER_ROLES.admin]}}).state("product_edit",{"abstract":!0,url:"/product_edit",name:"product",templateUrl:"views/common/content.html",data:{pageTitle:"Product",authorizedRoles:[USER_ROLES.admin]}}).state("product_edit.entitytId",{url:"/:entitytId",name:"productEdit",templateUrl:"views/productEdit.html",controller:ProductEditCtrl,data:{pageTitle:"New Product",authorizedRoles:[USER_ROLES.admin]}}).state("store",{url:"/store",templateUrl:"views/store.html",controller:StoreCtrl,data:{pageTitle:"Store",authorizedRoles:[USER_ROLES.consumer]}}).state("banners",{url:"/banners",templateUrl:"views/banners.html",controller:bannersCtrl,data:{pageTitle:"banners",authorizedRoles:[USER_ROLES.admin]}}).state("brandshow",{url:"/brandshow",templateUrl:"views/brandshow.html",controller:BrandshowCtrl,data:{pageTitle:"brandshow",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("brandshow_item",{"abstract":!0,url:"/brandshow_item",name:"brandshow",templateUrl:"views/common/content.html",data:{pageTitle:"brandshow",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("brandshow_item.entitytId",{url:"/:entitytId",name:"brandshowItem",templateUrl:"views/brandshow_item.html",controller:BrandshowItemCtrl,data:{pageTitle:"brandshow Item",authorizedRoles:[USER_ROLES.anonymusUser]}}).state("timeline",{url:"/timeline",templateUrl:"views/timeline.html",controller:TimelineCtrl,data:{pageTitle:"Order Status",authorizedRoles:[USER_ROLES.admin]}}).state("brands",{url:"/brands",templateUrl:"views/brands.html",controller:BrandCtrl,data:{pageTitle:"brands",authorizedRoles:[USER_ROLES.admin]}}).state("itemsDetails",{"abstract":!0,url:"/itemsDetails",name:"Items Details",templateUrl:"views/common/content.html",data:{pageTitle:"Items Details",authorizedRoles:[USER_ROLES.consumer]}}).state("itemsDetails.itemId",{url:"/:itemId",name:"Order Items",templateUrl:"views/itemsDetails.html",controller:ItemsDetailCtrl,data:{pageTitle:"Items Details",authorizedRoles:[USER_ROLES.consumer]}}).state("userManagements_edit",{"abstract":!0,url:"/userManagements_edit",name:"userManagements",templateUrl:"views/common/content1.html",data:{pageTitle:"userManagements",authorizedRoles:[USER_ROLES.admin]}}).state("userManagements_edit.entityID",{url:"/:entityID",name:"userEdit",templateUrl:"views/edit_userManagements.html",controller:MoreDetailsUserManagementsModalInstanceCtrl,data:{pageTitle:"New Product",authorizedRoles:[USER_ROLES.admin]}}).state("pendingOrders",{url:"/pendingOrders/:status",templateUrl:"views/orders.html",controller:OrdersCtrl,data:{pageTitle:"Orders",authorizedRoles:[USER_ROLES.admin,USER_ROLES.staff]}}).state("deliveredOrders",{url:"/deliveredOrders/:status",templateUrl:"views/orders.html",controller:OrdersCtrl,data:{pageTitle:"Orders",authorizedRoles:[USER_ROLES.admin,USER_ROLES.staff]}}).state("orderTrack",{url:"/orderTrack/:hashId",templateUrl:"views/Ordertimeline.html",controller:OrderTimelineCtrl,data:{pageTitle:"Time line",authorizedRoles:[USER_ROLES.admin,USER_ROLES.staff,USER_ROLES.consumer]}}).state("feedback",{url:"/feedback/:hashId",templateUrl:"views/Feedback.html",controller:FeedbackCtrl,data:{pageTitle:"Feed Back",authorizedRoles:[USER_ROLES.admin,USER_ROLES.staff,USER_ROLES.consumer]}})}function pageTitle($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="@ NobleCrowd";toState.data&&toState.data.pageTitle&&(title=toState.data.pageTitle+" @ NobleCrowd"),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}function sideNavigation($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.metisMenu()})}}}function responsiveVideo(){return{restrict:"A",link:function(scope,element){var figure=element,video=element.children();video.attr("data-aspectRatio",video.height()/video.width()).removeAttr("height").removeAttr("width"),$(window).resize(function(){var newWidth=figure.width();video.width(newWidth).height(newWidth*video.attr("data-aspectRatio"))}).resize()}}}function iboxTools($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first"),content=ibox.find("div.ibox-content");content.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var ibox=$element.closest("div.ibox");ibox.remove()}}}}function iboxToolsFullScreen($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools_full_screen.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first"),content=ibox.find("div.ibox-content");content.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var ibox=$element.closest("div.ibox");ibox.remove()},$scope.fullscreen=function(){var ibox=$element.closest("div.ibox"),button=$element.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),button.toggleClass("fa-expand").toggleClass("fa-compress"),ibox.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}}}function minimalizaSidebar($timeout){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function($scope,$element){$scope.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style")}}}}function closeOffCanvas(){return{restrict:"A",template:'<a class="close-canvas-menu" ng-click="closeOffCanvas()"><i class="fa fa-times"></i></a>',controller:function($scope,$element){$scope.closeOffCanvas=function(){$("body").toggleClass("mini-navbar")}}}}function vectorMap(){return{restrict:"A",scope:{myMapData:"="},link:function(scope,element,attrs){element.vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":.9,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:scope.myMapData,scale:["#1ab394","#22d6b1"],normalizeFunction:"polynomial"}]}})}}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(scope,element,attrs){scope.$watch(scope.sparkData,function(){render()}),scope.$watch(scope.sparkOptions,function(){render()});var render=function(){$(element).sparkline(scope.sparkData,scope.sparkOptions)}}}}function icheck($timeout){return{restrict:"A",require:"ngModel",link:function($scope,element,$attrs,ngModel){return $timeout(function(){var value;return value=$attrs.value,$scope.$watch($attrs.ngModel,function(newValue){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(event){return"checkbox"===$(element).attr("type")&&$attrs.ngModel&&$scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel?$scope.$apply(function(){return ngModel.$setViewValue(value)}):void 0})})}}}function ionRangeSlider(){return{restrict:"A",scope:{rangeOptions:"="},link:function(scope,elem,attrs){elem.ionRangeSlider(scope.rangeOptions)}}}function dropZone(){return{restrict:"AE",template:"<div ng-transclude></div>",transclude:!0,scope:{dropzone:"=",dropzoneConfig:"=",eventHandlers:"="},link:function(scope,element,attrs,ctrls){try{Dropzone}catch(error){throw new Error("Dropzone.js not loaded.")}var dropzone=new Dropzone(element[0],scope.dropzoneConfig);scope.eventHandlers&&Object.keys(scope.eventHandlers).forEach(function(eventName){dropzone.on(eventName,scope.eventHandlers[eventName])}),scope.dropzone=dropzone}}}function chatSlimScroll($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.slimscroll({height:"234px",railOpacity:.4})})}}}function customValid(){return{require:"ngModel",link:function(scope,ele,attrs,c){scope.$watch(attrs.ngModel,function(){var validText="Inspinia";scope.extras==validText?c.$setValidity("cvalid",!0):c.$setValidity("cvalid",!1)})}}}function fullScroll($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.slimscroll({height:"100%",railOpacity:.9})})}}}function slimScroll($timeout){return{restrict:"A",scope:{boxHeight:"@"},link:function(scope,element){$timeout(function(){element.slimscroll({height:scope.boxHeight,railOpacity:.9})})}}}function clockPicker(){return{restrict:"A",link:function(scope,element){element.clockpicker()}}}function landingScrollspy(){return{restrict:"A",link:function(scope,element,attrs){element.scrollspy({target:".navbar-fixed-top",offset:80})}}}function fitHeight(){return{restrict:"A",link:function(scope,element){element.css("height",$(window).height()+"px"),element.css("min-height",$(window).height()+"px")}}}function starRating(){return{restrict:"A",template:'<ul class="rating" style="color: #a9a9a9; margin: 0;padding: 0;display: inline-block;"><li ng-repeat="star in stars"  ng-class="star" ng-click="toggle($index)" style=" list-style-type: none;display: inline-block;padding: 1px; text-align: center; font-weight: bold; cursor: pointer;">  <i class="fa fa-star-o fa-3x"></i> </li></ul>',scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(scope,elem,attrs){var updateStars=function(){scope.stars=[];for(var i=0;i<scope.max;i++)scope.stars.push({filled:i<scope.ratingValue})};scope.toggle=function(index){scope.ratingValue=index+1,scope.onRatingSelected({rating:index+1})},scope.$watch("ratingValue",function(oldVal,newVal){newVal&&updateStars()})}}}function averageRating(){return{restrict:"A",template:'<ul class="rating" style="color: #a9a9a9; margin: 0;padding: 0;display: inline-block;"><li ng-repeat="star in stars"  ng-class="star"  style=" list-style-type: none;display: inline-block;padding: 1px; text-align: center; font-weight: bold; ">  <i class="fa fa-star-o"></i> </li></ul>',scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(scope,elem,attrs){var updateStars=function(){scope.stars=[];for(var i=0;i<scope.max;i++)scope.stars.push({filled:i<scope.ratingValue})};scope.toggle=function(index){scope.ratingValue=index+1,scope.onRatingSelected({rating:index+1})},scope.$watch("ratingValue",function(oldVal,newVal){newVal&&updateStars()})}}}function backgroundImage(){return function(scope,element,attrs){scope.$watch(attrs.backImg,function(value){element.css({"background-image":"url("+value+")","background-size":"cover"})})}}function myAngularDirective(){return{restrict:"E",template:"<span>Hi this is myAngularDirective </span>",link:function(scope,elem,attrs,$compile){}}}function test($compile){return{restrict:"E",scope:{text:"@"},template:'<button ng-click="add()" class="btn btn-primary">{{text}}</button>',controller:function($scope,$element){$scope.add=function(){var el=$compile("<my-angular-directive />")($scope);$("#page").append(el)}}}}function andyDraggable(){return{restrict:"A",link:function(scope,elm,attrs){var options=scope.$eval(attrs.andyDraggable);elm.draggable(options)}}}function colorPicker(){return{restrict:"C",link:function(scope,elm,attrs){elm.spectrum({preferredFormat:"hex",showPalette:!0,allowEmpty:!0,showInput:!0,palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]})}}}function editElement(){return{restrict:"AC",link:function(scope,element,attrs){element.context.tagName;scope.$watch(scope,function(value){element.css("background-color",value?"transparent":attrs.myBgcolor)})}}}function fullPath(){return{link:function(scope,element,attrs){"A"===element[0].tagName?attrs.$set("href",dbServe+attrs.fullPath):attrs.$set("src",dbServe+attrs.fullPath)}}}function zoomer(){return{restrict:"AC",scope:{height:"@"},link:function(scope,element,attrs){element[0].zoomer({zoom:.25,width:270,height:.25*scope.height,message:"Drag&Drop Me!"})}}}function editContent($modal){return{restrict:"C",link:function(scope,elm,attrs){elm.on("mouseenter",function(){elm.css({outline:"3px dashed red",cursor:"pointer"})}).on("mouseleave",function(){elm.css({outline:"",cursor:""})}),scope.showEditModalContent=function(selector){var modalInstance=$modal.open({templateUrl:"editModalContent.html",controller:"EditContentModalInstanceCtrl",resolve:{selector:function(){return selector}}});modalInstance.result.then(function(selector){},function(){})},elm.click(function(){"radio_content"==scope.mode?scope.showEditModalContent(elm):"radio_details"==scope.mode&&(scope.showStyleEditor=!0,scope.main=!1,scope.second=!1,scope.all=!1)})}}}function MainCtrl($scope,$rootScope,$interval,MenuByUser,$window,$store,CheckAuthentication,locale,USER_ROLES,AuthService,CurrentUser,Session,DataService,AUTH_EVENTS){$scope.cart=DataService.cart,$scope.currentUser=null,$scope.userRoles=USER_ROLES,$scope.isAuthorized=AuthService.isAuthorized,Session.create(0,0,"au"),$rootScope.currentUser=null,$scope.navCollapsed=!0,$scope.navigate=function(url){window.innerWidth<990&&($scope.navCollapsed=!$scope.navCollapsed),$rootScope.go(url)},$rootScope.go("index"),$(window).resize(function(){$scope.$apply(function(){window.innerWidth>990?$scope.navCollapsed=!1:$scope.navCollapsed=!0})}),$scope.setCurrentUser=function(){CurrentUser.get().then(function(result){if($scope.currentUser=result.data,$rootScope.currentUser=$scope.currentUser,Session.create($scope.currentUser.id,$scope.currentUser.id,$scope.currentUser.groups[0].name),$scope.currentUser){var params={};MenuByUser.customGET("",params).then(function(result){$scope.menues=result.data.menu,$rootScope.returnToUrl?($rootScope.go($rootScope.returnToUrl),$rootScope.returnToUrl=null):$rootScope.go($scope.menues[0].view_name)},function(error){})}},function(error){$scope.checkAuthentication(),Session.create(0,0,"au")})},$scope.$on(AUTH_EVENTS.loginSuccess,$scope.setCurrentUser),$scope.languages=[{code:"en-US",label:"English"},{code:"zh-Hans",label:"Chinese"}],$scope.lang=$scope.languages[0].code,$scope.changeLag=function(loc){locale.setLocale(loc)},$scope.changeLag();AuthService.isAuthenticated();$scope.logout=function(){AuthService.logOut(),Session.destroy(),Session.create(0,0,"au"),$scope.currentUser=null,$scope.cart.clearItems(),$rootScope.go("index")},$store.get("access_token")&&$scope.setCurrentUser(),$scope.checkAuthentication=function(){CheckAuthentication.get().then(function(data){},function(error){var refresh_token=$store.get("refresh_token");if(refresh_token){var signInDetails={refresh_token:refresh_token,client_id:1,client_secret:123,grant_type:"refresh_token"};AuthService.login(signInDetails).then(function(user){$rootScope.$broadcast(AUTH_EVENTS.loginSuccess)},function(){$rootScope.$broadcast(AUTH_EVENTS.loginFailed),$scope.user={username:"",password:""},$scope.logout()})}})},$interval(function(){$store.get("access_token")&&$scope.checkAuthentication()},1e4)}function StaffManagementCtrl($scope,$rootScope,$modal,$log,UserRepository){var EnitityRepository=UserRepository;$scope.entityName="staff",$scope.entitiesName="staffs",$scope.search="",$scope.currentPage=1,$scope.group_id=3,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search,group_id:$scope.group_id};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){console.log(error)})},$scope.getEntities(),$scope["delete"]=function(entity){EnitityRepository.remove(entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.bandConfirm=function(entity){var modalInstance=$rootScope.getBanConfirmationModel($scope.entityName,entity);modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.unBannedUser=function(entity){var modalInstance=$rootScope.getUnBanConfirmationModel($scope.entityName,entity);modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.moreDetails=function(entity){var modalInstance=$modal.open({templateUrl:"moreDetailsUserModalContent.html",controller:"StaffEditCtrl",resolve:{entity:function(){return entity}}});modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open=function(){var modalInstance=$modal.open({templateUrl:"newUserModalContent.html",controller:"StaffCreateCtrl"});modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})}}function StaffEditCtrl($scope,$modalInstance,entity,flash,UserRepository){$scope.entityName="staff",$scope.entitiesName="staffs",$scope.newPassword="",$scope.change=!1,$scope.getUser=function(){UserRepository.get(entity.id).then(function(result){$scope.entity=result})},$scope.getUser(),$scope.countries=countriesList,$scope.ok=function(){$scope.newPassword&&($scope.entity.password=$scope.newPassword),UserRepository.update($scope.entity).then(function(){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage("",success),$modalInstance.close()},function(error){$rootScope.errorMessage(error,"update"),$scope.getEntities()})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function StaffCreateCtrl($scope,$modalInstance,flash,UserRepository,$rootScope){$scope.entity=null,$scope.ok=function(){$scope.entity&&($scope.entity.group_id=3,$scope.entity.username=$scope.entity.email,UserRepository.create($scope.entity).then(function(result,headers){$modalInstance.close();var success="SuccessFully create "+$scope.entityName;$rootScope.successMessage(success,"create")},function(error){$rootScope.errorMessage(error,"create")}))},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function LoginCtrl($scope,$rootScope,AUTH_EVENTS,AuthService,flash,PostRemind){$scope.isLoginPage=!1,$scope.forgotPw=!1,$scope.login=!0,$scope.user={username:"",password:""},$scope.loginAccount=function(){$scope.login=!0,$scope.forgotPw=!1},$scope.forgotPassword=function(){$scope.forgotPw=!0,$scope.login=!1},$scope.sendEmail=function(){if($scope.resetEmail){var reset={email:$scope.resetEmail};PostRemind.post(reset).then(function(data,headers){flash.success="An email has been sent to your inbox for you to recover your account details!",$scope.resetEmail=""},function(error){var errorMsg="";for(var k in error.data)error.data.hasOwnProperty(k)&&(errorMsg=errorMsg+"<br/>Error with "+k+":"+error.data[k]);flash.error="Unable to send the email  check your email or please Contact support@PersonalPages.com "})}},$scope.signIn=function(){var credentials={username:$scope.user.username,password:$scope.user.password,client_id:1,client_secret:123,grant_type:"password"};AuthService.login(credentials).then(function(user){$rootScope.$broadcast(AUTH_EVENTS.loginSuccess)},function(){$rootScope.$broadcast(AUTH_EVENTS.loginFailed),$scope.user={username:"",password:""},flash.error="Username or Password is invalid. Or User is banned. Contact support@PersonalPages.com."})}}function LoginPopUpCtrl($scope,$rootScope,AUTH_EVENTS,AuthService,flash,$modalInstance,$rootScope){$scope.login=!0,$scope.user={username:"",password:""},$scope.close=function(){$modalInstance.dismiss("cancel")},$scope.signIn=function(){var credentials={username:$scope.user.username,password:$scope.user.password,client_id:1,client_secret:123,grant_type:"password"};AuthService.login(credentials).then(function(user){$rootScope.$broadcast(AUTH_EVENTS.loginSuccess),$modalInstance.close()},function(){$rootScope.$broadcast(AUTH_EVENTS.loginFailed),$scope.user={username:"",password:""},flash.error="Username or Password is invalid. Or User is banned. Contact support@PersonalPages.com."})},$scope.goRegister=function(){$rootScope.go("register"),$modalInstance.dismiss("cancel")}}function RegisterConfirmationCtrl($scope,$stateParams,flash,$http,$window){$stateParams.code&&($scope.codeHash=$stateParams.code),$scope.$parent.isLoginTemp=!0,$scope.$parent.myAccount=!1,$scope.goToLogin=function(){$window.open("/#/login","_self")},$scope.confirmed=!1,$scope.confirmCode=function(){if($scope.codeHash){var confirmation_code={activation_code:$scope.codeHash};$http.post(dbSever+"activateUser",confirmation_code).success(function(data,status,headers,config){flash.success="Successfully confirmed your account!",$scope.confirmed=!0}).error(function(data,status,headers,config){flash.error="Your confirmation key is wrong. Please check your email and try again."})}}}function AboutCtrl($scope,$rootScope,ShowBanners,$log,BrandRepository){var getBanners=function(){ShowBanners.customGET("",{}).then(function(result){$scope.banners=result.data},function(error){})};getBanners(),$scope.getBrands=function(){var params={};BrandRepository.getList(params).then(function(result){$scope.brands=result.data},function(error){})},$scope.moreDetails=function(entitytId){$rootScope.go("brandshow_item/"+entitytId)},$scope.getBrands()}function ProfileCtrl($scope,flash,$sce,fileReader,$rootScope,UserRepository){$scope.editing=!1,$scope.change=!1,$scope.getFile=function(){fileReader.readAsDataUrl($scope.file,$scope).then(function(result){$scope.imageSrc=result})},$scope.path="",$scope.countries=countriesList,$scope.save=function(currentUser){UserRepository.get(currentUser.id).then(function(result){var user=result;user.first_name=currentUser.first_name,user.last_name=currentUser.last_name,user.email=currentUser.email,user.street=currentUser.street,user.storeName=currentUser.storeName,user.city=currentUser.city,user.zip_code=currentUser.zip_code,user.country=currentUser.country,user.phone=currentUser.phone,user.file=currentUser.file+"?_ts="+(new Date).getTime(),$scope.newPassword&&currentUser.confirmPassword&&(user.password=currentUser.confirmPassword),UserRepository.update(user).then(function(data){$scope.newPassword="",$scope.change=!1,flash.success="Successfully Updated Profile",currentUser.file=data.user.file,$scope.$parent.setCurrentUser()},function(error){var errorMsg="";for(var k in error.data)error.data.hasOwnProperty(k)&&(errorMsg=errorMsg+"<br>Error with  "+k+":"+error.data[k]);flash.error="Unable to Update profile!"+errorMsg})})},$scope.cancel=function(){$rootScope.go("products")}}function CategoryCtrl($scope,$rootScope,$modal,$log,CatogoryRepository){var EnitityRepository=CatogoryRepository;$scope.entityName="category",$scope.entitiesName="categories",$scope.createEntity=1,$scope.entity=null,$scope.search="",$scope.currentPage=1,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=0},function(error){$rootScope.errorMessage(error,"get")})},$scope.getEntities(),$scope.selectedCategoryId=0,$scope.setEntity=function(entity){EnitityRepository.get(entity.id).then(function(result){$scope.entity=result,$scope.createEntity=0},function(error){})},$scope.create=function(){$scope.entity&&EnitityRepository.create($scope.entity).then(function(result,headers){var action="Successfully Created  "+$scope.entityName+"!";$rootScope.successMessage(result,action),$scope.entity=null,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"create")})},$scope.createEnable=function(){$scope.entity=null,$scope.createEntity=1},$scope.update=function(){$scope.entity&&EnitityRepository.update($scope.entity).then(function(result){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage(result,success),$scope.entity=null,$scope.createEntity=1,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"update"),$scope.getEntities()})},$scope["delete"]=function(entity){EnitityRepository.remove($scope.entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})}}function OrdersCtrl($scope,$modal,$log,$window,filterFilter,flash,OrderRepository,$stateParams,TimelineRepository,StatusUpdate,$rootScope){$stateParams.status&&($scope.status=$stateParams.status);var EnitityRepository=OrderRepository;$scope.entityName="order",$scope.entitiesName="orders",$scope.search="",$scope.currentPage=1,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search,status:$scope.status};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5})},$scope.getEntities(),$scope.search="",$scope["delete"]=function(entity){EnitityRepository.remove(entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.customeMessage(error.data.error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.update=function(entityId){var modalInstance=$modal.open({templateUrl:"views/updateStatus.html",controller:"UpdateStatusCtrl",resolve:{entityId:function(){return entityId}}});modalInstance.result.then(function(order){},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.ship=function(entity){var modalInstance=$modal.open({
templateUrl:"moreDetailsOrderModalContent.html",controller:"MoreDetailsOrderModalInstanceCtrl",resolve:{entity:function(){return entity}}});modalInstance.result.then(function(order){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.colorArray=["bg-color-orange","bg-color-red","bg-color-blue","bg-color-green","bg-color-redLight","bg-color-pink","bg-color-greenLight","bg-color-blueLight"],$scope.getStatusColor=function(status){return 0==status?msg="pending":1==status&&(msg="delivered"),msg},$scope.getStatus=function(status){var msg="";return 0==status?msg="Pending":1==status&&(msg="Delivered"),msg},$scope.userDetails=function(user){var modalInstance=$modal.open({templateUrl:"userDetailsOrderModalContent.html",controller:"userDetailsOrderModalInstanceCtrl",resolve:{user:function(){return user}}});modalInstance.result.then(function(){$scope.update()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.productDetails=function(productId){var modalInstance=$modal.open({templateUrl:"productDetailsModalContent.html",controller:"ProductDetailsModalInstanceCtrl",resolve:{productId:function(){return productId}}});modalInstance.result.then(function(){},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.moreOderDetails=function(order){var modalInstance=$modal.open({templateUrl:"moreOrderModalContent.html",controller:"MoreOrderModalInstanceCtrl",resolve:{order:function(){return order}}});modalInstance.result.then(function(order){$scope.update(order)},function(){$log.info("Modal dismissed at: "+new Date)})}}function UpdateStatusCtrl($scope,entityId,TimelineRepository,$modalInstance,StatusUpdate,$rootScope,OrderRepository,GetStatus,CurrentTimeline){$scope.message=null,$scope.entityId=entityId,$scope.currentStatus=null;$scope.getCurrentTimeline=function(){CurrentTimeline.customGET("",{orderId:$scope.entityId}).then(function(result){$scope.current=result.data;for(var data=result.data,i=0;i<$scope.timeline.length;i++)$scope.timeline[i].id==data.id&&($scope.currentStatus=$scope.timeline[i]);$scope.currentStatus&&($scope.message=data.pivot.status_message)},function(error){})},$scope.change=function(){var currentDateTime=new Date;$scope.message="order status changes to  "+$scope.currentStatus.status+" "+currentDateTime},$scope.getTimeline=function(){var params={system:0};TimelineRepository.getList(params).then(function(result){$scope.timeline=result.data,$scope.getCurrentTimeline()})},$scope.save=function(){var object={orderId:$scope.entityId,statusId:$scope.currentStatus.id,message:$scope.message};StatusUpdate.post(object).then(function(data,headers){var success="succefully updated";$rootScope.successMessage("",success),$scope.getCurrentTimeline()},function(error){$rootScope.errorMessage(error,"error")})},$scope.getTimeline(),$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function MoreOrderModalInstanceCtrl($scope,$modalInstance,order,OrderItems){$scope.getStatus=function(status){var msg="";return 0==status?msg="Pending":1==status&&(msg="Delivered"),msg},$scope.orderId=order,$scope.getOrderItems=function(){var orders=OrderItems.get({orderId:$scope.orderId});orders.$promise.then(function(result){$scope.items=result.data.items,$scope.order=result.data.order[0]},function(){})},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.getOrderItems()}function MoreDetailsOrderModalInstanceCtrl($scope,flash,$modalInstance,OrderRepository,entity,$rootScope){$scope.entity=entity,$scope.ok=function(){OrderRepository.get($scope.entity.id).then(function(result){0==result.status&&(result.status=1),OrderRepository.update(result).then(function(){var success="succefully updated";$rootScope.successMessage("",success),$modalInstance.close()},function(error){$rootScope.errorMessage(error,"delete")})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function userDetailsOrderModalInstanceCtrl($scope,$modalInstance,user){$scope.user=user,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function StoreCtrl(AllProducts,$scope,CatogoryRepository,DataService){var EntityGet=AllProducts;$scope.detailsprod=DataService.detailsprod,$scope.cart=DataService.cart,$scope.categoryId=0,$scope.search="",$scope.currentPage=1,$scope.getProductItems=function(){var params={page:$scope.currentPage,categoryId:$scope.categoryId,search:$scope.search};EntityGet.customGET("",params).then(function(result){$scope.entities=result.data.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){})},$scope.filterByCategory=function(categoryId){$scope.currentPage=1,$scope.categoryId=categoryId,$scope.getProductItems()},$scope.getCategories=function(){var params={page:0};$scope.categories=CatogoryRepository.getList(params).then(function(result){$scope.categories=result.data},function(error){console.log("$save failed "+JSON.stringify(error))})},$scope.getProductItems(),$scope.getCategories(),$scope.getAll=function(){$scope.categoryId=0,$scope.getProductItems()}}function ItemsDetailCtrl($scope,$stateParams,GetProductDetails,DataService){$scope.detailsprod=DataService.detailsprod,$scope.cart=DataService.cart,$stateParams.itemId&&($scope.productId=$stateParams.itemId),$scope.getProductDetails=function(){var params={productId:$scope.productId};GetProductDetails.customGET("",params).then(function(result){$scope.product=result},function(error){})},$scope.productId&&$scope.getProductDetails()}function VendorCtrl($scope,$modal,$log,UserRepository,$rootScope){var EnitityRepository=UserRepository;$scope.entityName="vendor",$scope.entitiesName="vendors",$scope.search="",$scope.currentPage=1,$scope.group_id=4,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search,group_id:$scope.group_id};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){console.log(error)})},$scope.getEntities(),$scope.open=function(){var modalInstance=$modal.open({templateUrl:"VendorCreate.html",controller:"VendorCreateCtrl"});modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope["delete"]=function(entity){EnitityRepository.remove(entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.moreDetails=function(entity){var modalInstance=$modal.open({templateUrl:"VendorEdit.html",controller:"VendorEditCtrl",resolve:{entity:function(){return entity}}});modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})}}function VendorEditCtrl($scope,$modalInstance,entity,UserRepository,$rootScope){$scope.getUser=function(){UserRepository.get(entity.id).then(function(result){$scope.entity=result})},$scope.getUser(),$scope.ok=function(){UserRepository.update($scope.entity).then(function(result){$modalInstance.close();var success="SuccessFully update "+$scope.entityName;$rootScope.successMessage(result,success)},function(error){$rootScope.errorMessage(error,"update")})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function VendorCreateCtrl($scope,$modalInstance,UserRepository,$rootScope){$scope.entity=null,$scope.create_vendor=function(){$scope.entity&&($scope.entity.password=Math.random().toString(36).slice(-8),$scope.entity.username=$rootScope.makeid(),$scope.entity.phone=$rootScope.makeid(),$scope.entity.group_id=4,UserRepository.create($scope.entity).then(function(result,headers){$modalInstance.close();var success="SuccessFully create "+$scope.entityName;$rootScope.successMessage(success,"create")},function(error){$rootScope.errorMessage(error,"create")}))},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function UserManagementsCtrl($scope,$modal,$rootScope,$log,UserRepository){var EnitityRepository=UserRepository;$scope.entityName="user",$scope.entitiesName="users",$scope.search="",$scope.currentPage=1,$scope.group_id=2,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search,group_id:$scope.group_id};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5})},$scope.getEntities(),$scope["delete"]=function(entity){EnitityRepository.remove(entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.bandConfirm=function(entity){var modalInstance=$rootScope.getBanConfirmationModel($scope.entityName,entity);modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.unBannedUser=function(entity){var modalInstance=$rootScope.getUnBanConfirmationModel($scope.entityName,entity);modalInstance.result.then(function(){$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.moreDetails=function(entityID){$rootScope.go("userManagements_edit/"+entityID)},$scope.open=function(){$rootScope.go("userManagements_create")}}function MoreDetailsUserManagementsModalInstanceCtrl($scope,$stateParams,UserRepository,$rootScope){$scope.entityName="user",$scope.entitiesName="users",$scope.countries=countriesList,$scope.confirm=!1,$scope.change=!1,$scope.confirmMessages="",$scope.notMatch="Password Not Match",$scope.newPassword="",$scope.check=function(newPassword,confirmPassword){return newPassword!=confirmPassword?($scope.confirm=!0,$scope.confirmMessage=$scope.notMatch):void($scope.confirm=!1)},$stateParams.entityID&&($scope.entityID=$stateParams.entityID),$scope.getUser=function(){UserRepository.get($scope.entityID).then(function(result){$scope.entity=result})},$scope.getUser(),$scope.ok=function(){$scope.entity&&($scope.newPassword&&($scope.user.password=$scope.newPassword),UserRepository.update($scope.entity).then(function(){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage("",success),$scope.entity=null,$modalInstance.close()},function(error){$rootScope.errorMessage(error,"update")}))}}function NewUserManagementsCtrl($scope,UserCreate){$scope.entityName="user",$scope.entitiesName="users",$scope.countries=countriesList,$scope.confirm=!1,$scope.confirmMessages="",$scope.notMatch="Password Not Match",$scope.newPassword="",$scope.check=function(newPassword,confirmPassword){return newPassword!=confirmPassword?($scope.confirm=!0,$scope.confirmMessage=$scope.notMatch):void($scope.confirm=!1)},$scope.entity=null,$scope.submit=function(){$scope.entity&&($scope.entity.group_id=2,UserCreate.post($scope.entity).then(function(data,headers){scope.entity=null,console.log("$save success "+data);var success="SuccessFully create "+$scope.entityName+"!";$rootScope.successMessage("",success),$scope.entity=null,$scope.user=null,$scope.passwordConfirm="",$scope.planId=0},function(error){$rootScope.errorMessage(error,"update")}))}}function ProductCtrl($scope,flash,$modal,$rootScope,$log,ProductRepository){var EnitityRepository=ProductRepository;$scope.entityName="product",$scope.entitiesName="products",$scope.search="",$scope.currentPage=1,$scope.group_id=3,$scope.currentPage=1,$scope.search="",$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){})},$scope.getEntities(),$scope["delete"]=function(entity){EnitityRepository.remove(entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.getEntities()},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.create=function(size){$rootScope.go("product_create")},$scope.moreDetails=function(entitytId){$rootScope.go("product_edit/"+entitytId)}}function ProductCreateCtrl($scope,$rootScope,$log,$modal,ProductRepository,CatogoryRepository,UserRepository,MeasurementRepository,FROALA_OPTIONS){var EnitityRepository=ProductRepository;$scope.entityName="product",$scope.entitiesName="products",$scope.search="",$scope.entity=null,$scope.froalaOptions=FROALA_OPTIONS.product,$scope.tags=[],$scope.selectedVendors={},$scope.selectedCategories={},$scope.selectedCategories.category=[],$scope.selectedVendors.vendor=[],$scope.getVendors=function(){var userParams={page:0,group_id:4};UserRepository.getList(userParams).then(function(result){$scope.vendors=result.data})},$scope.getCategories=function(){var categoryParams={page:0};CatogoryRepository.getList(categoryParams).then(function(result){$scope.categories=result.data})},$scope.getMeasurement=function(){var measurementParams={page:0};MeasurementRepository.getList(measurementParams).then(function(result){$scope.measurements=result.data})},$scope.getVendors(),$scope.getCategories(),$scope.getMeasurement(),$scope.productCreateSuccessfully=function(product){var modalInstance=$modal.open({templateUrl:"productCreateSuccessfullyModalContent.html",controller:"ProductCreateSuccessfullyModalInstanceCtrl",resolve:{product:function(){return product}}});modalInstance.result.then(function(product){$rootScope.go("product")},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.ok=function(){$scope.entity&&($scope.entity.categories=$scope.selectedCategories.category,$scope.entity.tags=$scope.tags,$scope.entity.vendors=$scope.selectedVendors.vendor,EnitityRepository.create($scope.entity).then(function(data,headers){var success="Successfully Create "+$scope.entityName;$rootScope.successMessage("",success),$scope.productCreateSuccessfully(),$scope.product=null},function(error){$rootScope.errorMessage(error,"update")}))},$scope.cancel=function(){$rootScope.go("product")}}function ProductEditCtrl($scope,$stateParams,$rootScope,$log,$modal,RemoveProductTag,AddProductTag,$sce,ProductRepository,CatogoryRepository,UserRepository,MeasurementRepository,FROALA_OPTIONS,ImageDelete){var EnitityRepository=ProductRepository;$scope.entityName="product",$scope.entitiesName="products",$scope.search="",$scope.edit=!1,$scope.options=FROALA_OPTIONS.product,$stateParams.entitytId&&($scope.entitytId=$stateParams.entitytId),$scope.dropzoneConfig={parallelUploads:3,maxFileSize:30,url:$sce.trustAsResourceUrl(dbSever+"postUpload/"+$scope.entitytId)},$scope.dropzoneUrl="",$scope.selectedCategories={},$scope.selectedVendors={},$scope.selectedCategories.category=[],$scope.selectedVendors.vendor=[];var tem_categories=[],tem_vendors=[];$scope.getMeasurement=function(){var measurementParams={page:0};MeasurementRepository.getList(measurementParams).then(function(result){$scope.measurements=result.data})},$scope.getMeasurement(),$scope.getVendors=function(){var userParams={page:0,group_id:4};UserRepository.getList(userParams).then(function(result){$scope.vendors=result.data,$scope.selectedVendors.vendor=$rootScope.removeExistingEntities($scope.vendors,tem_vendors)})},$scope.getCategories=function(){var categoryParams={page:0};CatogoryRepository.getList(categoryParams).then(function(result){$scope.categories=result.data,$scope.selectedCategories.category=$rootScope.removeExistingEntities($scope.categories,tem_categories)})},$scope.getEntity=function(){EnitityRepository.get($scope.entitytId).then(function(result){$scope.entity=result,tem_categories=$scope.entity.category,tem_vendors=$scope.entity.vendor,$scope.getCategories(),$scope.getVendors()})},$scope.getEntity(),$scope.ok=function(){$scope.entity&&($scope.entity.category=$scope.selectedCategories.category,$scope.entity.vendor=$scope.selectedVendors.vendor,ProductRepository.update($scope.entity).then(function(result,headers){$scope.getEntity();var success="Successfully Update the "+$scope.entityName;$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"update")}))},$scope.addTag=function(tag){if($scope.entitytId){var newTag={product_id:$scope.entitytId,tag_text:tag.text};AddProductTag.post(newTag).then(function(data,headers){},function(error){$rootScope.errorMessage(error,"addtag")})}},$scope.removeTag=function(tag){if($scope.entitytId){var removeTag={product_id:$scope.entitytId,tag_id:tag.id};RemoveProductTag.post(removeTag).then(function(data,headers){},function(error){rootScope.errorMessage(error,"removetag")})}},$scope.cancel=function(){$rootScope.go("product")},$scope.deleteImage=function(image){var deleteImage={id:image.id};ImageDelete.post(deleteImage).then(function(data,headers){var success="Successfully Delete the image";$rootScope.successMessage("",success),$scope.ok()},function(error){$rootScope.errorMessage(error,"update")})},$scope.deleteConfirmImage=function(image){var modalInstance=$rootScope.getDeleteConfirmationModel("image");modalInstance.result.then(function(){$scope.deleteImage(image)},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.mainPicture=function(image){var modalInstance=$modal.open({templateUrl:"mainPictureConfirmImageModalContent.html",controller:"MainPictureImageModalInstanceCtrl",resolve:{image:function(){return image}}});modalInstance.result.then(function(){$scope.ok()},function(){$log.info("Modal dismissed at: "+new Date)})}}function MainPictureImageModalInstanceCtrl($scope,$modalInstance,image,MainPicture){$scope.image=image,$scope.ok=function(){var mainPic={main_pic:$scope.image.id};MainPicture.post(mainPic).then(function(data,headers){$modalInstance.close();var success="Successfully make a mainPicture";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"update")})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function ProductCreateSuccessfullyModalInstanceCtrl($scope,$modalInstance){$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function CartCtrl($scope,DataService){$scope.cart=DataService.cart}function shoppingCart(cartName){this.cartName=cartName,this.clearCart=!1,this.checkoutParameters={},this.items=[],this.loadItems();var self=this;$(window).unload(function(){self.clearCart&&self.clearItems(),self.saveItems(),self.clearCart=!1})}function checkoutParameters(serviceName,merchantID,options){this.serviceName=serviceName,this.merchantID=merchantID,this.options=options}function cartItem(code,name,price,minimumQuantity,quantity){this.code=code,this.name=name,this.price=1*price,this.quantity=1*quantity,this.minimumQuantity=1*minimumQuantity}function CheckOutCtrl($scope,$braintree,DataService,OrderRepository,flash,$rootScope,$locale){$scope.dateOptions={},$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.clear=function(){$scope.delivery_date=null},$scope.formats=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.altInputFormats=["M!/d!/yyyy"],$scope.popup1={opened:!1},$scope.popup2={opened:!1},$scope.open1=function(){$scope.popup1.opened=!0},$scope.delivery_date="",$scope.formSubmited=!1;var EnitityRepository=OrderRepository;$scope.loading=!1,$scope.cart=DataService.cart,$scope.currentYear=(new Date).getFullYear(),$scope.currentMonth=(new Date).getMonth()+1,$scope.months=$locale.DATETIME_FORMATS.MONTH,$scope.ccinfo={type:void 0},$scope.makeOrder=function(nonce){if($scope.cart.items.length>0){var entity={delivery_date:$scope.delivery_date,amount:$scope.cart.getTotalPrice(),nonce:nonce,items:$scope.cart.items};EnitityRepository.create(entity).then(function(result,headers){var success="succesfully ordered";$rootScope.successMessage("",success),$scope.cart.clearItems(),$scope.loading=!1,$rootScope.go("invoice/"+result.data.id)},function(error){$scope.loading=!1;var errorMsg="";for(var k in error.data)error.data.hasOwnProperty(k)&&(errorMsg=errorMsg+"<br/>Error with "+k+":"+error.data[k]);flash.error="There was a problem processing your credit card; please double check your payment information and try again"})}};var client;$scope.creditCard={number:"",expirationDate:""};var startup=function(){$braintree.getClientToken().success(function(token){client=new $braintree.api.Client({clientToken:token})})};$scope.payButtonClicked=function(){$scope.formSubmited=!0,$scope.paymentForm.$valid&&($scope.loading=!0,client.tokenizeCard({number:$scope.creditCard.number,expirationDate:$scope.creditCard.month+"/"+$scope.creditCard.year},function(err,nonce){nonce&&$scope.makeOrder(nonce)}))},startup()}function InvoiceCtrl($scope,$stateParams,OrderItems,$rootScope){$stateParams.orderId&&($scope.orderId=$stateParams.orderId);var grtInvoice=function(){var filterParams={orderId:$scope.orderId};OrderItems.customGET("",filterParams).then(function(result){$scope.order=result.data},function(error){})};grtInvoice(),$scope.goBack=function(){1==$scope.order.status?$rootScope.go("deliveredOrders/1"):0==$scope.order.status&&$rootScope.go("pendingOrders/0")}}function myOrderCtrl($scope,AllOrderByConsumer,$rootScope){$scope.search="";var EntityGet=AllOrderByConsumer;$scope.currentPage=1,$scope.getEntity=function(){var params={page:$scope.currentPage,search:$scope.search};EntityGet.customGET("",params).then(function(result){$scope.entities=result.data.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){})},$scope.feedback=function(hashId){$rootScope.go("feedback/"+hashId)},$scope.getStatus=function(status){var msg="";return 0==status?msg="Pending":1==status&&(msg="Delivered"),msg},$scope.getEntity()}function SearchByTagsCtrl($scope,SearchByTags,DataService,$stateParams){$stateParams.tag?$scope.search=$stateParams.tag:$scope.search="",$scope.cart=DataService.cart,$scope.$watch("search",function(newVal,oldVal){newVal!=oldVal&&$scope.getProducts()}),$scope.currentPage=1,$scope.getProducts=function(){var params={page:$scope.currentPage,search:$scope.search};SearchByTags.customGET("",params).then(function(result){$scope.products=result.data,$scope.itemsPerPage=result.per_page,$scope.currentPage=result.current_page,$scope.totalItems=result.total,$scope.maxSize=5},function(error){console.log(error)})},$scope.getProducts()}function bannersCtrl($scope,$rootScope,$modal,$log,BannerRepository){var EnitityRepository=BannerRepository;$scope.entityName="banner",$scope.entitiesName="banners",$scope.createEntity=1,$scope.entity=null,$scope.search="",$scope.currentPage=1,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=0},function(error){})},$scope.getEntities(),$scope.selectedCategoryId=0,$scope.setEntity=function(entity){EnitityRepository.get(entity.id).then(function(result){$scope.entity=result,$scope.createEntity=0},function(error){})},$scope.create=function(){$scope.entity&&EnitityRepository.create($scope.entity).then(function(result,headers){var action="Successfully Created  "+$scope.entityName+"!";$rootScope.successMessage(result,action),$scope.entity=null,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"create")})},$scope.createEnable=function(){$scope.entity=null,$scope.createEntity=1},$scope.update=function(){$scope.entity&&($scope.entity.change_tile_image?$scope.entity.tile_image=$scope.entity.change_tile_image:delete $scope.entity.tile_image,EnitityRepository.update($scope.entity).then(function(result){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage(result,success),$scope.entity=null,$scope.createEntity=1,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"update"),$scope.getEntities()}))},$scope["delete"]=function(entity){EnitityRepository.remove($scope.entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$modal.open({templateUrl:"views/deleteConfirmation.html",controller:"DeleteConfirmModalInstanceCtrl",resolve:{entityName:function(){return $scope.entityName}}});modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})}}function RegisterCtrl($scope,flash,$log,UserCreate,$rootScope){var EnitityRepository=UserCreate;$scope.entity=null,$scope.countries=countriesList,$scope.submit=function(){$scope.entity&&($scope.entity.group_id=2,EnitityRepository.post($scope.entity).then(function(data,headers){var success="Thanks. Please confirm your registration via email.";$rootScope.successMessage("",success),$scope.passwordConfirm="",$scope.entity=null},function(error){$rootScope.errorMessage(error,"delete")}))}}function ForgetPasswordCtrl($scope,PostReset,$log,flash,$stateParams){$scope.goToLogin=function(){$window.open("/#/login","_self")},$scope.user=null,$scope.confirm=!1,$scope.confirmMessages="",$scope.notMatch="Password Not Match",$scope.newPassword="",$scope.check=function(newPassword,confirmPassword){return newPassword!=confirmPassword?($scope.confirm=!0,$scope.confirmMessage=$scope.notMatch):void($scope.confirm=!1)},$stateParams.code&&($scope.codeHash=$stateParams.code),$scope.resetPassword=function(){if($scope.user){var reset={email:$scope.user.email,password:$scope.user.password,password_confirmation:$scope.user.password,token:$scope.codeHash};PostReset.post(reset).then(function(data,headers){flash.success="Successfully reset your password!",$scope.user=null,$scope.resetSuccess=!0},function(error){console.log("$save failed "+JSON.stringify(error));var errorMsg="";for(var k in error.data)error.data.hasOwnProperty(k)&&(errorMsg=errorMsg+"<br/>Error with "+k+":"+error.data[k]);flash.error="Unable to reset you password"+errorMsg})}}}function DeleteConfirmModalInstanceCtrl($scope,$modalInstance,entityName){$scope.entityName=entityName,$scope.deleteEntity=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function UserBanCtrl($scope,$modalInstance,flash,data,BannedUser,UnBannedUser){var data=data;$scope.entityName=data.entityName;var entity=data.entity;$scope.bandUser=function(){BannedUser.post({user_id:entity.id}).then(function(data){$modalInstance.close(data),flash.success="SuccessFully banned the "+$scope.entityName+"!",$rootScope.successMessage("",success)},function(error){$modalInstance.dismiss("cancel"),$rootScope.errorMessage(error,"delete")})},$scope.unBannedUser=function(){UnBannedUser.post({user_id:entity.id}).then(function(data){$modalInstance.close(data),flash.success="SuccessFully Unbanned the "+$scope.entityName+"!",$rootScope.successMessage("",success)},function(error){$modalInstance.dismiss("cancel"),$rootScope.errorMessage(error,"delete")})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function ContactUsCtrl($scope,ContactUs,$rootScope,$modal){$scope.entity=null,$scope.sendEmailSuccesfully=function(){var modalInstance=$modal.open({templateUrl:"sendEmailSuccessl.html",controller:"SendEmailSuccessCtrl"});modalInstance.result.then(function(product){},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.send=function(){$scope.entity&&ContactUs.post($scope.entity).then(function(data,headers){$scope.entity=null,$scope.sendEmailSuccesfully()},function(error){$rootScope.errorMessage(error,"send")})}}function SendEmailSuccessCtrl($scope,$modalInstance){$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function OrderTimelineCtrl($scope,$stateParams,TimelineDetails,$rootScope,TimelineRepository){$scope.goBack=function(){1==$scope.order.status?$rootScope.go("deliveredOrders/1"):0==$scope.order.status&&$rootScope.go("pendingOrders/0")},$scope.getTimeline=function(){var params={process_order:"ASC"};TimelineRepository.getList(params).then(function(result){$scope.timelines=result.data;for(var i=0;i<$scope.timelines.length;i++)for(var j=0;j<$scope.orderTimelines.length;j++)$scope.timelines[i].id==$scope.orderTimelines[j].id&&($scope.timelines[i].show=$scope.orderTimelines[j],j==$scope.orderTimelines.length-1&&($scope.timelines[i].current=!0))})},$scope.orderDetails=function(){TimelineDetails.customGET("",{hashId:$scope.hashId}).then(function(result){$scope.orderTimelines=result.data.timeline,$scope.order=result.data.order,$scope.getTimeline()},function(error){})},$stateParams.hashId&&($scope.hashId=$stateParams.hashId,$scope.orderDetails())}function BrandCtrl($scope,$rootScope,$modal,$log,BrandRepository,FROALA_OPTIONS){var EnitityRepository=BrandRepository;$scope.entityName="brands",$scope.entitiesName="brands",$scope.createEntity=1,$scope.entity=null,$scope.search="",$scope.currentPage=1,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=0},function(error){})},$scope.getEntities(),$scope.selectedCategoryId=0,$scope.setEntity=function(entity){EnitityRepository.get(entity.id).then(function(result){$scope.entity=result,$scope.createEntity=0},function(error){})},$scope.create=function(){$scope.entity&&EnitityRepository.create($scope.entity).then(function(result,headers){var action="Successfully Created  "+$scope.entityName+"!";$rootScope.successMessage(result,action),$scope.entity=null,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"create")})},$scope.createEnable=function(){$scope.entity=null,$scope.createEntity=1},$scope.update=function(){$scope.entity&&($scope.entity.change_tile_image?$scope.entity.tile_image=$scope.entity.change_tile_image:delete $scope.entity.tile_image,EnitityRepository.update($scope.entity).then(function(result){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage(result,success),$scope.entity=null,$scope.createEntity=1,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"update"),$scope.getEntities()}))},$scope["delete"]=function(entity){EnitityRepository.remove($scope.entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$modal.open({templateUrl:"views/deleteConfirmation.html",controller:"DeleteConfirmModalInstanceCtrl",resolve:{entityName:function(){
return $scope.entityName}}});modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})}}function BrandshowCtrl($scope,BrandRepository,$rootScope){$scope.nilaf="hi",$scope.getAllBrands=function(){var params={page:$scope.currentPage,search:$scope.search};BrandRepository.getList(params).then(function(result){$scope.brands=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=5},function(error){})},$scope.getAllBrands(),$scope.moreDetails=function(entitytId){$rootScope.go("brandshow_item/"+entitytId)}}function BrandshowItemCtrl($scope,$stateParams,BrandRepository){$stateParams.entitytId&&($scope.entitytId=$stateParams.entitytId),$scope.id=$scope.entitytId,$scope.getBrandItems=function(){BrandRepository.get($scope.entitytId).then(function(result){$scope.brandItem=result})},$scope.getBrandItems()}function TimelineCtrl($scope,TimelineRepository,$rootScope,ProcessUpdate){var EnitityRepository=TimelineRepository;$scope.entityName="Order Status",$scope.entitiesName="Order Status",$scope.createEntity=1,$scope.entity=null,$scope.search="",$scope.currentPage=1,$scope.getEntities=function(){var params={page:$scope.currentPage,search:$scope.search,system:$scope.system};EnitityRepository.getList(params).then(function(result){$scope.entities=result.data,$scope.itemsPerPage=result.page.per_page,$scope.currentPage=result.page.current_page,$scope.totalItems=result.page.total,$scope.maxSize=0},function(error){$rootScope.errorMessage(error,"get")})},$scope.getEntities(),$scope.processOrder=function(){ProcessUpdate.post({data:$scope.sortingLog}).then(function(data,headers){},function(error){$rootScope.errorMessage(error,"send")})},$scope.sortingLog=[],$scope.sortableOptions={stop:function(e,ui){var logEntry=$scope.entities.map(function(i){return i.id}).join(", ");$scope.sortingLog=logEntry,$scope.processOrder()}};var status=["1","2","4","12"];$scope["delete"]=!1,$scope.selectedCategoryId=0,$scope.setEntity=function(entity){EnitityRepository.get(entity.id).then(function(result){$scope.entity=result,1==$scope.entity.system?$scope.entity.system=!0:$scope.entity.system=!1,$scope.createEntity=0,-1==status.indexOf($scope.entity.id)?$scope["delete"]=!1:$scope["delete"]=!0},function(error){})},$scope.create=function(){$scope.entity&&(1==$scope.entity.system?$scope.entity.system=1:$scope.entity.system=0,EnitityRepository.create($scope.entity).then(function(result,headers){var action="Successfully Created  "+$scope.entityName+"!";$rootScope.successMessage(result,action),$scope.entity=null,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"create")}))},$scope.createEnable=function(){$scope.entity=null,$scope.createEntity=1},$scope.update=function(){$scope.entity&&(1==$scope.entity.system?$scope.entity.system=!0:$scope.entity.system=!1,EnitityRepository.update($scope.entity).then(function(result){var success="SuccessFully update "+$scope.entityName+"!";$rootScope.successMessage(result,success),$scope.entity=null,$scope.createEntity=1,$scope.getEntities()},function(error){$rootScope.errorMessage(error,"update"),$scope.getEntities()}))},$scope["delete"]=function(entity){EnitityRepository.remove($scope.entity).then(function(){$scope.entity=null,$scope.getEntities();var success="Deletion of "+$scope.entityName+" completed!";$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"delete")})},$scope.deleteConfirm=function(entity){var modalInstance=$rootScope.getDeleteConfirmationModel($scope.entityName);modalInstance.result.then(function(){$scope["delete"](entity),$scope.createEntity=1},function(){$log.info("Modal dismissed at: "+new Date)})}}function ServiceCtrl(){}function FeedbackCtrl($scope,TimelineDetails,$stateParams,AddFeedback,$rootScope){$scope.rating=0,$scope.getSelectedRating=function(rating){console.log(rating)},$scope.orderDetails=function(){TimelineDetails.customGET("",{hashId:$scope.hashId}).then(function(result){$scope.order=result.data.order},function(error){})},$stateParams.hashId&&($scope.hashId=$stateParams.hashId,$scope.orderDetails()),$scope.feedback=function(orderId){$scope.order.is_rated=!0,$scope.order.rating=$scope.rating,AddFeedback.post($scope.order).then(function(data,headers){var success="succefully submitted";$scope.order=null,$rootScope.go("myOrders"),$rootScope.successMessage("",success)},function(error){$rootScope.errorMessage(error,"error")})}}$(document).ready(function(){function fix_height(){var heightWithoutNavbar=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",heightWithoutNavbar+"px");var navbarHeigh=$("nav.navbar-default").height(),wrapperHeigh=$("#page-wrapper").height();navbarHeigh>wrapperHeigh&&$("#page-wrapper").css("min-height",navbarHeigh+"px"),wrapperHeigh>navbarHeigh&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&$("#page-wrapper").css("min-height",$(window).height()-60+"px")}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||fix_height()}),setTimeout(function(){fix_height()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),!function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var c=t.which;switch(c){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],c=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(c.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,c=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),c=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(c)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,c,i,l){l(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,c){return c&&t?t.replace(new RegExp(e(c),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(c){var i=c[0].getBoundingClientRect();return{width:i.width||c.prop("offsetWidth"),height:i.height||c.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);c.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile",function(e,t,c,i){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var c=t.parent().attr("theme")||e.theme;return c+"/choices.tpl.html"},compile:function(l,s){if(!s.repeat)throw c("repeat","Expected 'repeat' expression.");return function(l,s,n,a,r){var o=n.groupBy,u=n.groupFilter;if(a.parseRepeatAttr(n.repeat,o,u),a.disableChoiceExpression=n.uiDisableChoice,a.onHighlightCallback=n.onHighlight,o){var d=s.querySelectorAll(".ui-select-choices-group");if(1!==d.length)throw c("rows","Expected 1 .ui-select-choices-group but got '{0}'.",d.length);d.attr("ng-repeat",t.getGroupNgRepeatExpression())}var p=s.querySelectorAll(".ui-select-choices-row");if(1!==p.length)throw c("rows","Expected 1 .ui-select-choices-row but got '{0}'.",p.length);p.attr("ng-repeat",t.getNgRepeatExpression(a.parserResult.itemName,"$select.items",a.parserResult.trackByExp,o)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+a.parserResult.itemName+")").attr("ng-click","$select.select("+a.parserResult.itemName+",false,$event)");var g=s.querySelectorAll(".ui-select-choices-row-inner");if(1!==g.length)throw c("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",g.length);g.attr("uis-transclude-append",""),i(s,r)(l),l.$watch("$select.search",function(e){e&&!a.open&&a.multiple&&a.activate(!1,!0),a.activeIndex=a.tagging.isActivated?-1:0,a.refresh(n.refresh)}),n.$observe("refreshDelay",function(){var t=l.$eval(n.refreshDelay);a.refreshDelay=void 0!==t?t:e.refreshDelay})}}}}]),c.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig",function(t,c,i,l,s,n,a){function r(){(p.resetSearchInput||void 0===p.resetSearchInput&&a.resetSearchInput)&&(p.search=g,p.selected&&p.items.length&&!p.multiple&&(p.activeIndex=p.items.indexOf(p.selected)))}function o(e,t){var c,i,l=[];for(c=0;c<t.length;c++)for(i=0;i<e.length;i++)e[i].name==[t[c]]&&l.push(e[i]);return l}function u(t){var c=!0;switch(t){case e.DOWN:!p.open&&p.multiple?p.activate(!1,!0):p.activeIndex<p.items.length-1&&p.activeIndex++;break;case e.UP:!p.open&&p.multiple?p.activate(!1,!0):(p.activeIndex>0||0===p.search.length&&p.tagging.isActivated&&p.activeIndex>-1)&&p.activeIndex--;break;case e.TAB:(!p.multiple||p.open)&&p.select(p.items[p.activeIndex],!0);break;case e.ENTER:p.open&&(p.tagging.isActivated||p.activeIndex>=0)?p.select(p.items[p.activeIndex]):p.activate(!1,!0);break;case e.ESC:p.close();break;default:c=!1}return c}function d(){var e=c.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw n("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(p.activeIndex<0)){var i=t[p.activeIndex],l=i.offsetTop+i.clientHeight-e[0].scrollTop,s=e[0].offsetHeight;l>s?e[0].scrollTop+=l-s:l<i.clientHeight&&(p.isGrouped&&0===p.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=i.clientHeight-l)}}var p=this,g="";if(p.placeholder=a.placeholder,p.searchEnabled=a.searchEnabled,p.sortable=a.sortable,p.refreshDelay=a.refreshDelay,p.removeSelected=!1,p.closeOnSelect=!0,p.search=g,p.activeIndex=0,p.items=[],p.open=!1,p.focus=!1,p.disabled=!1,p.selected=void 0,p.focusser=void 0,p.resetSearchInput=!0,p.multiple=void 0,p.disableChoiceExpression=void 0,p.tagging={isActivated:!1,fct:void 0},p.taggingTokens={isActivated:!1,tokens:void 0},p.lockChoiceExpression=void 0,p.clickTriggeredSelect=!1,p.$filter=l,p.searchInput=c.querySelectorAll("input.ui-select-search"),1!==p.searchInput.length)throw n("searchInput","Expected 1 input.ui-select-search but got '{0}'.",p.searchInput.length);p.isEmpty=function(){return angular.isUndefined(p.selected)||null===p.selected||""===p.selected},p.activate=function(e,c){p.disabled||p.open||(c||r(),t.$broadcast("uis:activate"),p.open=!0,p.activeIndex=p.activeIndex>=p.items.length?0:p.activeIndex,-1===p.activeIndex&&p.taggingLabel!==!1&&(p.activeIndex=0),i(function(){p.search=e||p.search,p.searchInput[0].focus()}))},p.findGroupByName=function(e){return p.groups&&p.groups.filter(function(t){return t.name===e})[0]},p.parseRepeatAttr=function(e,c,i){function l(e){var l=t.$eval(c);if(p.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(l)?l(e):e[l],c=p.findGroupByName(t);c?c.items.push(e):p.groups.push({name:t,items:[e]})}),i){var s=t.$eval(i);angular.isFunction(s)?p.groups=s(p.groups):angular.isArray(s)&&(p.groups=o(p.groups,s))}p.items=[],p.groups.forEach(function(e){p.items=p.items.concat(e.items)})}function a(e){p.items=e}p.setItemsFn=c?l:a,p.parserResult=s.parse(e),p.isGrouped=!!c,p.itemProperty=p.parserResult.itemName,p.refreshItems=function(e){e=e||p.parserResult.source(t);var c=p.selected;if(angular.isArray(c)&&!c.length||!p.removeSelected)p.setItemsFn(e);else if(void 0!==e){var i=e.filter(function(e){return c.indexOf(e)<0});p.setItemsFn(i)}},t.$watchCollection(p.parserResult.source,function(e){if(void 0===e||null===e)p.items=[];else{if(!angular.isArray(e))throw n("items","Expected an array but got '{0}'.",e);p.refreshItems(e),p.ngModel.$modelValue=null}})};var h;p.refresh=function(e){void 0!==e&&(h&&i.cancel(h),h=i(function(){t.$eval(e)},p.refreshDelay))},p.setActiveItem=function(e){p.activeIndex=p.items.indexOf(e)},p.isActive=function(e){if(!p.open)return!1;var t=p.items.indexOf(e[p.itemProperty]),c=t===p.activeIndex;return!c||0>t&&p.taggingLabel!==!1||0>t&&p.taggingLabel===!1?!1:(c&&!angular.isUndefined(p.onHighlightCallback)&&e.$eval(p.onHighlightCallback),c)},p.isDisabled=function(e){if(p.open){var t,c=p.items.indexOf(e[p.itemProperty]),i=!1;return c>=0&&!angular.isUndefined(p.disableChoiceExpression)&&(t=p.items[c],i=!!e.$eval(p.disableChoiceExpression),t._uiSelectChoiceDisabled=i),i}},p.select=function(e,c,l){if(void 0===e||!e._uiSelectChoiceDisabled){if(!p.items&&!p.search)return;if(!e||!e._uiSelectChoiceDisabled){if(p.tagging.isActivated){if(p.taggingLabel===!1)if(p.activeIndex<0){if(e=void 0!==p.tagging.fct?p.tagging.fct(p.search):p.search,!e||angular.equals(p.items[0],e))return}else e=p.items[p.activeIndex];else if(0===p.activeIndex){if(void 0===e)return;if(void 0!==p.tagging.fct&&"string"==typeof e){if(e=p.tagging.fct(p.search),!e)return}else"string"==typeof e&&(e=e.replace(p.taggingLabel,"").trim())}if(p.selected&&angular.isArray(p.selected)&&p.selected.filter(function(t){return angular.equals(t,e)}).length>0)return void p.close(c)}t.$broadcast("uis:select",e);var s={};s[p.parserResult.itemName]=e,i(function(){p.onSelectCallback(t,{$item:e,$model:p.parserResult.modelMapper(t,s)})}),p.closeOnSelect&&p.close(c),l&&"click"===l.type&&(p.clickTriggeredSelect=!0)}}},p.close=function(e){p.open&&(p.ngModel&&p.ngModel.$setTouched&&p.ngModel.$setTouched(),r(),p.open=!1,t.$broadcast("uis:close",e))},p.setFocus=function(){p.focus||p.focusInput[0].focus()},p.clear=function(e){p.select(void 0),e.stopPropagation(),i(function(){p.focusser[0].focus()},0,!1)},p.toggle=function(e){p.open?(p.close(),e.preventDefault(),e.stopPropagation()):p.activate()},p.isLocked=function(e,t){var c,i=p.selected[t];return i&&!angular.isUndefined(p.lockChoiceExpression)&&(c=!!e.$eval(p.lockChoiceExpression),i._uiSelectChoiceLocked=c),c};var f=null;p.sizeSearchInput=function(){var e=p.searchInput[0],c=p.searchInput.parent().parent()[0],l=function(){return c.clientWidth*!!e.offsetParent},s=function(t){if(0===t)return!1;var c=t-e.offsetLeft-10;return 50>c&&(c=t),p.searchInput.css("width",c+"px"),!0};p.searchInput.css("width","10px"),i(function(){null!==f||s(l())||(f=t.$watch(l,function(e){s(e)&&(f(),f=null)}))})},p.searchInput.on("keydown",function(c){var l=c.which;t.$apply(function(){var t=!1;if((p.items.length>0||p.tagging.isActivated)&&(u(l),p.taggingTokens.isActivated)){for(var s=0;s<p.taggingTokens.tokens.length;s++)p.taggingTokens.tokens[s]===e.MAP[c.keyCode]&&p.search.length>0&&(t=!0);t&&i(function(){p.searchInput.triggerHandler("tagged");var t=p.search.replace(e.MAP[c.keyCode],"").trim();p.tagging.fct&&(t=p.tagging.fct(t)),t&&p.select(t,!0)})}}),e.isVerticalMovement(l)&&p.items.length>0&&d(),(l===e.ENTER||l===e.ESC)&&(c.preventDefault(),c.stopPropagation())}),p.searchInput.on("paste",function(e){var t=e.originalEvent.clipboardData.getData("text/plain");if(t&&t.length>0&&p.taggingTokens.isActivated&&p.tagging.fct){var c=t.split(p.taggingTokens.tokens[0]);c&&c.length>0&&(angular.forEach(c,function(e){var t=p.tagging.fct(e);t&&p.select(t,!0)}),e.preventDefault(),e.stopPropagation())}}),p.searchInput.on("tagged",function(){i(function(){r()})}),t.$on("$destroy",function(){p.searchInput.off("keyup keydown tagged blur paste")})}]),c.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,c,i,l,s,n){return{restrict:"EA",templateUrl:function(e,c){var i=c.theme||t.theme;return i+(angular.isDefined(c.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(l,a){return angular.isDefined(a.multiple)?l.append("<ui-select-multiple/>").removeAttr("multiple"):l.append("<ui-select-single/>"),function(l,a,r,o,u){function d(e){if(h.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(a[0],e.target):a[0].contains(e.target),!t&&!h.clickTriggeredSelect){var c=["input","button","textarea"],i=angular.element(e.target).scope(),s=i&&i.$select&&i.$select!==h;s||(s=~c.indexOf(e.target.tagName.toLowerCase())),h.close(s),l.$digest()}h.clickTriggeredSelect=!1}}function p(){var t=i(a);m=angular.element('<div class="ui-select-placeholder"></div>'),m[0].style.width=t.width+"px",m[0].style.height=t.height+"px",a.after(m),$=a[0].style.width,e.find("body").append(a),a[0].style.position="absolute",a[0].style.left=t.left+"px",a[0].style.top=t.top+"px",a[0].style.width=t.width+"px"}function g(){null!==m&&(m.replaceWith(a),m=null,a[0].style.position="",a[0].style.left="",a[0].style.top="",a[0].style.width=$)}var h=o[0],f=o[1];h.generatedId=t.generateId(),h.baseTitle=r.title||"Select box",h.focusserTitle=h.baseTitle+" focus",h.focusserId="focusser-"+h.generatedId,h.closeOnSelect=function(){return angular.isDefined(r.closeOnSelect)?s(r.closeOnSelect)():t.closeOnSelect}(),h.onSelectCallback=s(r.onSelect),h.onRemoveCallback=s(r.onRemove),h.ngModel=f,h.choiceGrouped=function(e){return h.isGrouped&&e&&e.name},r.tabindex&&r.$observe("tabindex",function(e){h.focusInput.attr("tabindex",e),a.removeAttr("tabindex")}),l.$watch("searchEnabled",function(){var e=l.$eval(r.searchEnabled);h.searchEnabled=void 0!==e?e:t.searchEnabled}),l.$watch("sortable",function(){var e=l.$eval(r.sortable);h.sortable=void 0!==e?e:t.sortable}),r.$observe("disabled",function(){h.disabled=void 0!==r.disabled?r.disabled:!1}),r.$observe("resetSearchInput",function(){var e=l.$eval(r.resetSearchInput);h.resetSearchInput=void 0!==e?e:!0}),r.$observe("tagging",function(){if(void 0!==r.tagging){var e=l.$eval(r.tagging);h.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else h.tagging={isActivated:!1,fct:void 0}}),r.$observe("taggingLabel",function(){void 0!==r.tagging&&(h.taggingLabel="false"===r.taggingLabel?!1:void 0!==r.taggingLabel?r.taggingLabel:"(new)")}),r.$observe("taggingTokens",function(){if(void 0!==r.tagging){var e=void 0!==r.taggingTokens?r.taggingTokens.split("|"):[",","ENTER"];h.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(r.autofocus)&&n(function(){h.setFocus()}),angular.isDefined(r.focusOn)&&l.$on(r.focusOn,function(){n(function(){h.setFocus()})}),e.on("click",d),l.$on("$destroy",function(){e.off("click",d)}),u(l,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw c("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);a.querySelectorAll(".ui-select-match").replaceWith(i);var l=t.querySelectorAll(".ui-select-choices");if(l.removeAttr("ui-select-choices"),l.removeAttr("data-ui-select-choices"),1!==l.length)throw c("transcluded","Expected 1 .ui-select-choices but got '{0}'.",l.length);a.querySelectorAll(".ui-select-choices").replaceWith(l)});var v=l.$eval(r.appendToBody);(void 0!==v?v:t.appendToBody)&&(l.$watch("$select.open",function(e){e?p():g()}),l.$on("$destroy",function(){g()}));var m=null,$="",b=null,x="direction-up";l.$watch("$select.open",function(t){if(t){if(b=angular.element(a).querySelectorAll(".ui-select-dropdown"),null===b)return;b[0].style.opacity=0,n(function(){var t=i(a),c=i(b);t.top+t.height+c.height>e[0].documentElement.scrollTop+e[0].documentElement.clientHeight&&(b[0].style.position="absolute",b[0].style.top=-1*c.height+"px",a.addClass(x)),b[0].style.opacity=1})}else{if(null===b)return;b[0].style.position="",b[0].style.top="",a.removeClass(x)}})}}}}]),c.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var c=t.parent().attr("theme")||e.theme,i=t.parent().attr("multiple");return c+(i?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,c,i,l){function s(e){l.allowClear=angular.isDefined(e)?""===e?!0:"true"===e.toLowerCase():!1}l.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){l.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",s),s(i.allowClear),l.multiple&&l.sizeSearchInput()}}}]),c.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var c,i=this,l=e.$select;e.$evalAsync(function(){c=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){c.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){l.refreshItems(),l.sizeSearchInput()},i.removeChoice=function(c){var s=l.selected[c];if(!s._uiSelectChoiceLocked){var n={};n[l.parserResult.itemName]=s,l.selected.splice(c,1),i.activeMatchIndex=-1,l.sizeSearchInput(),t(function(){l.onRemoveCallback(e,{$item:s,$model:l.parserResult.modelMapper(e,n)})}),i.updateModel()}},i.getPlaceholder=function(){return l.selected.length?void 0:l.placeholder}}],controllerAs:"$selectMultiple",link:function(i,l,s,n){function a(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function r(t){function c(){switch(t){case e.LEFT:return~g.activeMatchIndex?u:n;case e.RIGHT:return~g.activeMatchIndex&&r!==n?o:(d.activate(),!1);case e.BACKSPACE:return~g.activeMatchIndex?(g.removeChoice(r),u):n;case e.DELETE:return~g.activeMatchIndex?(g.removeChoice(g.activeMatchIndex),r):!1}}var i=a(d.searchInput[0]),l=d.selected.length,s=0,n=l-1,r=g.activeMatchIndex,o=g.activeMatchIndex+1,u=g.activeMatchIndex-1,p=r;return i>0||d.search.length&&t==e.RIGHT?!1:(d.close(),p=c(),g.activeMatchIndex=d.selected.length&&p!==!1?Math.min(n,Math.max(s,p)):-1,!0)}function o(e){if(void 0===e||void 0===d.search)return!1;var t=e.filter(function(e){return void 0===d.search.toUpperCase()||void 0===e?!1:e.toUpperCase()===d.search.toUpperCase()}).length>0;return t}function u(e,t){var c=-1;if(angular.isArray(e))for(var i=angular.copy(e),l=0;l<i.length;l++)if(void 0===d.tagging.fct)i[l]+" "+d.taggingLabel===t&&(c=l);else{var s=i[l];s.isTag=!0,angular.equals(s,t)&&(c=l)}return c}var d=n[0],p=i.ngModel=n[1],g=i.$selectMultiple;d.multiple=!0,d.removeSelected=!0,d.focusInput=d.searchInput,p.$parsers.unshift(function(){for(var e,t={},c=[],l=d.selected.length-1;l>=0;l--)t={},t[d.parserResult.itemName]=d.selected[l],e=d.parserResult.modelMapper(i,t),c.unshift(e);return c}),p.$formatters.unshift(function(e){var t,c=d.parserResult.source(i,{$select:{search:""}}),l={};if(!c)return e;var s=[],n=function(e,c){if(e&&e.length){for(var n=e.length-1;n>=0;n--){if(l[d.parserResult.itemName]=e[n],t=d.parserResult.modelMapper(i,l),d.parserResult.trackByExp){var a=/\.(.+)/.exec(d.parserResult.trackByExp);if(a.length>0&&t[a[1]]==c[a[1]])return s.unshift(e[n]),!0}if(angular.equals(t,c))return s.unshift(e[n]),!0}return!1}};if(!e)return s;for(var a=e.length-1;a>=0;a--)n(d.selected,e[a])||n(c,e[a])||s.unshift(e[a]);return s}),i.$watchCollection(function(){return p.$modelValue},function(e,t){t!=e&&(p.$modelValue=null,g.refreshComponent())}),p.$render=function(){if(!angular.isArray(p.$viewValue)){if(!angular.isUndefined(p.$viewValue)&&null!==p.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",p.$viewValue);d.selected=[]}d.selected=p.$viewValue,i.$evalAsync()},i.$on("uis:select",function(e,t){d.selected.push(t),g.updateModel()}),i.$on("uis:activate",function(){g.activeMatchIndex=-1}),i.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(t){var c=t.which;i.$apply(function(){var i=!1;e.isHorizontalMovement(c)&&(i=r(c)),i&&c!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),d.searchInput.on("keyup",function(t){if(e.isVerticalMovement(t.which)||i.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var c,l,s,n,a=angular.copy(d.items),r=angular.copy(d.items),p=!1,g=-1;if(void 0!==d.tagging.fct){if(s=d.$filter("filter")(a,{isTag:!0}),s.length>0&&(n=s[0]),a.length>0&&n&&(p=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),c=d.tagging.fct(d.search),c.isTag=!0,r.filter(function(e){return angular.equals(e,d.tagging.fct(d.search))}).length>0)return;c.isTag=!0}else{if(s=d.$filter("filter")(a,function(e){return e.match(d.taggingLabel)}),s.length>0&&(n=s[0]),l=a[0],void 0!==l&&a.length>0&&n&&(p=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),c=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(o(r.concat(d.selected)))return void(p&&(a=r,i.$evalAsync(function(){d.activeIndex=0,d.items=a})));if(o(r))return void(p&&(d.items=r.slice(1,r.length)))}p&&(g=u(d.selected,c)),g>-1?a=a.slice(g+1,a.length-1):(a=[],a.push(c),a=a.concat(r)),i.$evalAsync(function(){d.activeIndex=0,d.items=a})}}),d.searchInput.on("blur",function(){c(function(){g.activeMatchIndex=-1})})}}}]),c.directive("uiSelectSingle",["$timeout","$compile",function(t,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(i,l,s,n){var a=n[0],r=n[1];r.$parsers.unshift(function(e){var t,c={};return c[a.parserResult.itemName]=e,t=a.parserResult.modelMapper(i,c)}),r.$formatters.unshift(function(e){var t,c=a.parserResult.source(i,{$select:{search:""}}),l={};if(c){var s=function(c){return l[a.parserResult.itemName]=c,t=a.parserResult.modelMapper(i,l),t==e};if(a.selected&&s(a.selected))return a.selected;for(var n=c.length-1;n>=0;n--)if(s(c[n]))return c[n]}return e}),i.$watch("$select.selected",function(e){r.$viewValue!==e&&r.$setViewValue(e)}),r.$render=function(){a.selected=r.$viewValue},i.$on("uis:select",function(e,t){a.selected=t}),i.$on("uis:close",function(e,c){t(function(){a.focusser.prop("disabled",!1),c||a.focusser[0].focus()},0,!1)}),i.$on("uis:activate",function(){o.prop("disabled",!0)});var o=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");c(o)(i),a.focusser=o,a.focusInput=o,l.parent().append(o),o.bind("focus",function(){i.$evalAsync(function(){a.focus=!0})}),o.bind("blur",function(){i.$evalAsync(function(){a.focus=!1})}),o.bind("keydown",function(t){return t.which===e.BACKSPACE?(t.preventDefault(),t.stopPropagation(),a.select(void 0),void i.$apply()):void(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||((t.which==e.DOWN||t.which==e.UP||t.which==e.ENTER||t.which==e.SPACE)&&(t.preventDefault(),t.stopPropagation(),a.activate()),i.$digest()))}),o.bind("keyup input",function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(a.activate(o.val()),o.val(""),i.$digest())})}}}]),c.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,c){return{require:"^uiSelect",link:function(t,i,l,s){if(null===t[l.uiSelectSort])throw c("sort","Expected a list to sort");var n=angular.extend({axis:"horizontal"},t.$eval(l.uiSelectSortOptions)),a=n.axis,r="dragging",o="dropping",u="dropping-before",d="dropping-after";t.$watch(function(){return s.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(r),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),i.on("dragend",function(){i.removeClass(r)});var p,g=function(e,t){this.splice(t,0,this.splice(e,1)[0])},h=function(e){e.preventDefault();var t="vertical"===a?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===a?"offsetHeight":"offsetWidth"]/2?(i.removeClass(d),i.addClass(u)):(i.removeClass(u),i.addClass(d))},f=function(t){t.preventDefault();var c=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(p),p=e(function(){v(c)},20)},v=function(e){var c=t.$eval(l.uiSelectSort),s=c[e],n=null;n=i.hasClass(u)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,g.apply(c,[e,n]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:c,item:s,from:e,to:n})}),i.removeClass(o),i.removeClass(u),i.removeClass(d),i.off("drop",f)};i.on("dragenter",function(){i.hasClass(r)||(i.addClass(o),i.on("dragover",h),i.on("drop",f))}),i.on("dragleave",function(e){e.target==i&&(i.removeClass(o),i.removeClass(u),i.removeClass(d),i.off("dragover",h),i.off("drop",f))})}}}]),c.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var c=this;c.parse=function(c){var i=c.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);return{itemName:i[2],source:t(i[3]),trackByExp:i[4],modelMapper:t(i[1]||i[2])}},c.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},c.getNgRepeatExpression=function(e,t,c,i){var l=e+" in "+(i?"$group.items":t);return c&&(l+=" track by "+c),l}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),
e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),e.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),function(){angular.module("inspinia",["ngRoute","ui.router","ui.bootstrap","oc.lazyLoad","localytics.directives","pascalprecht.translate","ngIdle","ngSanitize","restangular","angular-flash.service","angular-flash.flash-alert-directive","ngSanitize","angularPayments","ngCookies","ngTagsInput","timer","ui.select","summernote","720kb.socialshare","ngPageTitle","froala","ngDraggable","toggle-switch","highcharts-ng","ngLocalize","ngLocalize.InstalledLanguages","braintree-angular","slick","ui.event","ui.map","ui.sortable"])}();var dbSever="http://localhost:8000/api/v1/",dbServe="http://localhost:8000/",dbServer_image="http://localhost:8000/",dbServer_image="http://localhost:8000/";smartApp=angular.module("inspinia"),smartApp.config(function(){}).config(config).run(function($rootScope,$state){$rootScope.$state=$state}).config(function(flashProvider){flashProvider.errorClassnames.push("alert-danger"),flashProvider.warnClassnames.push("alert-warning"),flashProvider.infoClassnames.push("alert-info"),flashProvider.successClassnames.push("alert-success")}).run(function($rootScope,$location,flash,$modal){$rootScope.go=function(path){$location.path(path)},$rootScope.customeMessage=function(response,action){flash.error=response},$rootScope.successMessage=function(response,action){flash.success=action,console.log(action+" successful"+JSON.stringify(response))},$rootScope.errorMessage=function(response,action){var errorMsg="";for(var k in response.data)response.data.hasOwnProperty(k)&&(errorMsg=errorMsg+"<br>Error with  "+k+":"+response.data[k]);flash.error=errorMsg,console.log(action+" error "+JSON.stringify(response)+errorMsg)},$rootScope.removeEmptyVariables=function(currentEntity){for(var k in currentEntity)currentEntity.hasOwnProperty(k)&&currentEntity[k]&&"function"!=typeof currentEntity[k]&&0==currentEntity[k].length&&delete currentEntity[k];return currentEntity},$rootScope.timeAgo=function(date,granularity){date=(new Date).getTime()/1e3-new Date(date).getTime()/1e3;var retval="",difference=date,periods={decade:31536e4,yr:31536e3,mnth:2628e3,week:604800,day:86400,hr:3600,mnt:60,second:1};if(5>difference)return retval="posted just now";for(var key in periods){if(difference>=periods[key]){var time=Math.floor(difference/periods[key]);difference%=periods[key],retval+=(retval?" ":"")+time+" ",retval+=time>1?key+"s":key,granularity--}if("0"==granularity)break}return retval+" ago"},$rootScope.returnToUrl=null,$rootScope.getDeleteConfirmationModel=function(entityName){var modalInstance=$modal.open({templateUrl:"views/deleteConfirmation.html",controller:"DeleteConfirmModalInstanceCtrl",resolve:{entityName:function(){return entityName}}});return modalInstance},$rootScope.getBanConfirmationModel=function(entityName,entity){var modalInstance=$modal.open({templateUrl:"views/bandConfirmUserModalContent.html",controller:"UserBanCtrl",resolve:{data:function(){return{entity:entity,entityName:entityName}}}});return modalInstance},$rootScope.getUnBanConfirmationModel=function(entityName,entity){var modalInstance=$modal.open({templateUrl:"views/unBandConfirmUserModalContent.html",controller:"UserBanCtrl",resolve:{data:function(){return{entity:entity,entityName:entityName}}}});return modalInstance},$rootScope.removeExistingEntities=function(entities,temp_Entities){for(var ExistingEntities=[],i=0,xlen=entities.length;xlen>i;i++)for(var x=0,len=temp_Entities.length;len>x;x++)temp_Entities[x].id===entities[i].id&&ExistingEntities.push(entities[i]);return ExistingEntities},$rootScope.makeid=function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}}).factory("errorInterceptor",function($q,$rootScope,$location,$window,$cookieStore,$injector,$store){return{responseError:function(response){if(response&&401===response.status&&500===response.data.code){$store.get("access_token");!$window.sessionStorage.access_token}if(response&&401===response.status&&"invalid_token"===response.data.error){var refresh_token=($cookieStore.get("access_token"),$cookieStore.get("refresh_token"));if(!$window.sessionStorage.access_token&&refresh_token){var data="b=1&refresh_token="+refresh_token+"&client_id=1&client_secret=123&grant_type=refresh_token&a=1";$http=$injector.get("$http"),$http.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",$http.post(dbSever+"oauth/access_token",data).success(function(resp){$window.sessionStorage.access_token=resp.access_token,$window.sessionStorage.refresh_token=resp.refresh_token,$injector.get("$http")(resp.config).then(function(response){deferred.resolve(response)},function(response){deferred.reject()})}).error(function(error){window.location="#/login"})}var deferred=$q.defer()}return response&&400===response.status,response&&404===response.status,response&&response.status>=500,$q.reject(response)}}}).run(["$route","$rootScope","$location",function($route,$rootScope,$location){var original=$location.path;$location.path=function(path,reload){if(reload===!1)var lastRoute=$route.current,un=$rootScope.$on("$locationChangeSuccess",function(){$route.current=lastRoute,un()});return original.apply($location,[path])}}]).run(["$rootScope","$window",function($rootScope,$window){$rootScope.getGlobals=function(variableName){return $window[variableName]},$rootScope.isImage=function(ext){return ext?"jpg"==ext||"jpeg"==ext||"gif"==ext||"png"==ext:void 0}}]).run(["$rootScope",function($rootScope){$rootScope.$watch("currenrtUser_gId",function(newVal,oldVal){(2==$rootScope.currenrtUser_gId||0==$rootScope.currenrtUser_gId)&&$window.open("/#/index","_self")})}]).factory("DataService",function(){var myCart=new shoppingCart("SilcoStore");return{cart:myCart}}).value("localeConf",{basePath:"languages",defaultLocale:"en-US",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::",validTokens:new RegExp("^[\\w\\.-]+\\.[\\w\\s\\.-]+\\w(:.*)?$")}).value("localeSupported",["en-US","zh-Hans"]).value("localeFallbacks",{en:"en-US",ch:"zh-Hans"}).factory("BearerAuthInterceptor",function($window,$q,$store){return{request:function(config){return config.headers=config.headers||{},$store.get("access_token")&&(config.headers.Authorization="Bearer "+$store.get("access_token")),config||$q.when(config)},response:function(response){return 401===response.status,response||$q.when(response)}}}).config(function($httpProvider){$httpProvider.interceptors.push("BearerAuthInterceptor")}).value("froalaConfig",{toolbarInline:!1,placeholderText:"",height:300,imageUploadURL:dbServer_image+"api/v1/storeImage",imageManagerLoadURL:dbServer_image+"api/v1/imageLoad",imageManagerDeleteURL:dbServer_image+"api/v1/destroyFile"}).config(function(RestangularProvider){RestangularProvider.setResponseExtractor(function(response,operation){if("getList"===operation){var newResponse=[];return newResponse.data=response.data.data,response.page&&(newResponse.page=response.page),newResponse}return response})}).config(function(RestangularProvider){var newBaseUrl=dbSever;RestangularProvider.setBaseUrl(newBaseUrl)}).constant("clientTokenPath",dbSever+"braintreeClientTokenPath").constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",admin:"GlobalAdmin",staff:"Staff",consumer:"Consumer",anonymusUser:"au"}).constant("FROALA_OPTIONS",{product:{toolbarButtons:["undo","redo","|","bold","italic","underline","superscript","subscript","strikethrough","clear","|","align","formatOL","formatUL","|","style","|","style","|","fontname","|","fontsize","|","color","|","height","|","table","|","ul","ol","paragraph","lineheight","|","link","picture","video","hr"]}}).run(function($rootScope,AUTH_EVENTS,AuthService){$rootScope.$on("$stateChangeStart",function(event,next){var authorizedRoles=next.data.authorizedRoles;AuthService.isAuthorized(authorizedRoles)||(event.preventDefault(),AuthService.isAuthenticated()?$rootScope.$broadcast(AUTH_EVENTS.notAuthorized):"login"!=event.currentScope.$state.current.name&&($rootScope.$broadcast(AUTH_EVENTS.notAuthenticated),$rootScope.returnToUrl=next.url,$rootScope.returnToUrl?$rootScope.go("login"):$rootScope.go("index")))})}).factory("AuthResolver",function($q,$rootScope,$state){return{resolve:function(){var deferred=$q.defer(),unwatch=$rootScope.$watch("currentUser",function(currentUser){angular.isDefined(currentUser)&&(currentUser?deferred.resolve(currentUser):deferred.reject(),unwatch())});return deferred.promise}}}),angular.module("inspinia").directive("appFilereader",function($q){var slice=Array.prototype.slice;return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){ngModel&&(ngModel.$render=function(){},element.bind("change",function(e){function readFile(file){var deferred=$q.defer(),reader=new FileReader;return reader.onload=function(e){deferred.resolve(e.target.result)},reader.onerror=function(e){deferred.reject(e)},reader.readAsDataURL(file),deferred.promise}var element=e.target;$q.all(slice.call(element.files,0).map(readFile)).then(function(values){element.multiple?ngModel.$setViewValue(values):ngModel.$setViewValue(values.length?values[0]:null)})}))}}}).directive("loginDialog",function(AUTH_EVENTS,$modal){return{restrict:"A",link:function(scope){var showDialog=function(){scope.visible=!0;var modalInstance=$modal.open({templateUrl:"views/loginPopUp.html",controller:"LoginPopUpCtrl"});modalInstance.result.then(function(){},function(){})};scope.visible=!1,scope.$on(AUTH_EVENTS.notAuthenticated,showDialog),scope.$on(AUTH_EVENTS.sessionTimeout,showDialog)}}}).directive("fileread",[function(){return{scope:{fileread:"="},link:function(scope,element,attributes){element.bind("change",function(changeEvent){var reader=new FileReader;reader.onload=function(loadEvent){scope.$apply(function(){scope.fileread=loadEvent.target.result})},reader.readAsDataURL(changeEvent.target.files[0])})}}}]).directive("ngFileSelect",function(){return{link:function($scope,el){el.bind("change",function(e){$scope.file=(e.srcElement||e.target).files[0],$scope.getFile()})}}}).service("fileReader",function($q,$log){var onLoad=function(reader,deferred,scope){return function(){scope.$apply(function(){deferred.resolve(reader.result)})}},onError=function(reader,deferred,scope){return function(){scope.$apply(function(){deferred.reject(reader.result)})}},onProgress=function(reader,scope){return function(event){scope.$broadcast("fileProgress",{total:event.total,loaded:event.loaded})}},getReader=function(deferred,scope){var reader=new FileReader;return reader.onload=onLoad(reader,deferred,scope),reader.onerror=onError(reader,deferred,scope),reader.onprogress=onProgress(reader,scope),reader},readAsDataURL=function(file,scope){var deferred=$q.defer(),reader=getReader(deferred,scope);return reader.readAsDataURL(file),deferred.promise};return{readAsDataUrl:readAsDataURL}}),angular.module("inspinia").filter("htmlToPlaintext",function(){return function(input){return input.replace(/<[^>]+>/gm,"")}}).directive("pwCheck",[function(){return{require:"ngModel",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pwCheck;elem.add(elem).on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();ctrl.$setValidity("pwmatch",v)})})}}}]).filter("capitalize",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""}}).filter("limitHtml",function(){return function(text,limit){var changedString=String(text).replace(/<[^>]+>/gm,"");changedString.length;return changedString.length>limit?changedString.substr(0,limit-1):changedString}}).directive("creditCardType",function(){var directive={require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(value){return scope.creditCard.type=/^5[1-5]/.test(value)?"mastercard":/^4/.test(value)?"visa":/^(?:2131|1800|35\d{3})\d{11}$/.test(value)?"jcb":/^(?:5[0678]\d\d|6304|6390|67\d\d)\d{8,15}$/.test(value)?"maestro":/^3[47]/.test(value)?"amex":/^6011|65|64[4-9]|622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))/.test(value)?"discover":void 0,ctrl.$setValidity("invalid",!!scope.creditCard.type),value})}};return directive}).directive("cardExpiration",function(){var directive={require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch("[creditCard.month,creditCard.year]",function(value){return ctrl.$setValidity("invalid",!0),scope.creditCard.year==scope.currentYear&&scope.creditCard.month<=scope.currentMonth&&ctrl.$setValidity("invalid",!1),value},!0)}};return directive}).filter("range",function(){var filter=function(arr,lower,upper){for(var i=lower;upper>=i;i++)arr.push(i);return arr};return filter}).directive("myMap",function(){var link=function(scope,element,attrs){function initMap(){void 0===map&&(map=new google.maps.Map(element[0],mapOptions))}function setMarker(map,position,title,content){var marker,markerOptions={position:position,map:map,title:title,icon:{url:"/images/red-pin.png",scaledSize:{width:120,height:106}}};marker=new google.maps.Marker(markerOptions),markers.push(marker),google.maps.event.addListener(marker,"click",function(){void 0!==infoWindow&&infoWindow.close();var infoWindowOptions={content:content};infoWindow=new google.maps.InfoWindow(infoWindowOptions),infoWindow.open(map,marker)})}var map,infoWindow,markers=[],mapOptions={center:new google.maps.LatLng(22.322316,114.191497),zoom:16,styles:[],mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1},beachFlagUrl="https://maps.google.com/mapfiles/ms/icons/green-dot.png";new google.maps.MarkerImage(beachFlagUrl,null,null,null,new google.maps.Size(172,172));initMap(),setMarker(map,new google.maps.LatLng(22.322316,114.191497),"Silco","Unit B 4/F,Freder Centre 3 Mok<br>Cheong Street To Kwa Wan,<br>Kowloon Hong Kong")};return{restrict:"A",template:'<div id="gmaps"></div>',replace:!0,link:link}}).directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("vectorMap",vectorMap).directive("sparkline",sparkline).directive("icheck",icheck).directive("ionRangeSlider",ionRangeSlider).directive("dropZone",dropZone).directive("responsiveVideo",responsiveVideo).directive("chatSlimScroll",chatSlimScroll).directive("customValid",customValid).directive("fullScroll",fullScroll).directive("closeOffCanvas",closeOffCanvas).directive("clockPicker",clockPicker).directive("landingScrollspy",landingScrollspy).directive("fitHeight",fitHeight).directive("iboxToolsFullScreen",iboxToolsFullScreen).directive("slimScroll",slimScroll).directive("starRating",starRating).directive("averageRating",averageRating).directive("backImg",backgroundImage).directive("myAngularDirective",myAngularDirective).directive("test",test).directive("andyDraggable",andyDraggable).directive("colorPicker",colorPicker).directive("editElement",editElement).directive("zoomer",zoomer).directive("editContent",editContent).directive("fullPath",fullPath),smartApp.factory("AbstractRepository",[function(){function AbstractRepository(restangular,route){this.restangular=restangular,this.route=route}return AbstractRepository.prototype={getList:function(params){return this.restangular.all(this.route).getList(params)},get:function(id){return this.restangular.one(this.route,id).get()},getView:function(id){return this.restangular.one(this.route,id).one(this.route+"view").get()},update:function(updatedResource){return updatedResource.put()},create:function(newResource){return this.restangular.all(this.route).post(newResource)},remove:function(object){return this.restangular.one(this.route,object.id).remove()}},AbstractRepository.extend=function(repository){repository.prototype=Object.create(AbstractRepository.prototype),repository.prototype.constructor=repository},AbstractRepository}]),smartApp.factory("GroupRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function GroupRepository(){AbstractRepository.call(this,Restangular,"user")}return AbstractRepository.extend(GroupRepository),new GroupRepository}]).factory("PostRemind",function(Restangular){return Restangular.allUrl("getPasswordResetCode")}).factory("PostReset",function(Restangular){return Restangular.allUrl("postReset")}).factory("CheckAuthentication",function(Restangular){return Restangular.one("checkAuthentication")}).factory("ContactUs",function(Restangular){return Restangular.allUrl("contactUs")});var countriesList=[{name:"Afghanistan",code:"AF"},{name:"land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",
code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];smartApp.factory("MenuByUser",function(Restangular){return Restangular.allUrl("getMenuByUser")}),angular.module("inspinia").factory("$store",function($parse){var storage="undefined"==typeof window.localStorage?void 0:window.localStorage,supported=!("undefined"==typeof storage||"undefined"==typeof window.JSON),privateMethods={parseValue:function(res){var val;try{val=JSON.parse(res),"undefined"==typeof val&&(val=res),"true"==val&&(val=!0),"false"==val&&(val=!1),parseFloat(val)!=val||angular.isObject(val)||(val=parseFloat(val))}catch(e){val=res}return val}},publicMethods={set:function(key,value){if(!supported)try{return $.cookie(key,value),value}catch(e){console.log("Local Storage not supported, make sure you have the $.cookie supported.")}var saver=JSON.stringify(value);return storage.setItem(key,saver),privateMethods.parseValue(saver)},get:function(key){if(!supported)try{return privateMethods.parseValue($.cookie(key))}catch(e){return null}var item=storage.getItem(key);return privateMethods.parseValue(item)},remove:function(key){if(!supported)try{return $.cookie(key,null),!0}catch(e){return!1}return storage.removeItem(key),!0},bind:function($scope,key,def){return def=def||"",publicMethods.get(key)||publicMethods.set(key,def),$parse(key).assign($scope,publicMethods.get(key)),$scope.$watch(key,function(val){publicMethods.set(key,val)},!0),publicMethods.get(key)}};return publicMethods}),smartApp.factory("CatogoryRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function CatogoryRepository(){AbstractRepository.call(this,Restangular,"category")}return AbstractRepository.extend(CatogoryRepository),new CatogoryRepository}]),smartApp.factory("OrderRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function OrderRepository(){AbstractRepository.call(this,Restangular,"order")}return AbstractRepository.extend(OrderRepository),new OrderRepository}]).factory("AllOrderByConsumer",function(Restangular){return Restangular.allUrl("getAllOrderByConsumer")}).factory("OrderItems",function(Restangular){return Restangular.allUrl("getItemsByOrder")}).factory("StatusUpdate",function(Restangular){return Restangular.allUrl("updateStatus")}).factory("TimelineDetails",function(Restangular){return Restangular.allUrl("timelinedetail")}).factory("GetStatus",function(Restangular){return Restangular.allUrl("getStatus")}).factory("CurrentTimeline",function(Restangular){return Restangular.allUrl("currentTimeline")}).factory("AddFeedback",function(Restangular){return Restangular.allUrl("addFeedback")}),smartApp.factory("ProductRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function ProductRepository(){AbstractRepository.call(this,Restangular,"products")}return AbstractRepository.extend(ProductRepository),new ProductRepository}]).factory("ImageDelete",function(Restangular){return Restangular.allUrl("deleteImage")}).factory("RemoveProductTag",function(Restangular){return Restangular.allUrl("removeTagProduct")}).factory("AddProductTag",function(Restangular){return Restangular.allUrl("addTagProduct")}).factory("MainPicture",function(Restangular){return Restangular.allUrl("makeMainPicture")}).factory("AllProducts",function(Restangular){return Restangular.allUrl("getAllProducts")}).factory("SearchByTags",function(Restangular){return Restangular.allUrl("searchByTags")}).factory("GetProductDetails",function(Restangular){return Restangular.allUrl("getProductById")}),shoppingCart.prototype.loadItems=function(){var items=null!=localStorage?localStorage[this.cartName+"_items"]:null;if(null!=items&&null!=JSON)try{for(var items=JSON.parse(items),i=0;i<items.length;i++){var item=items[i];null!=item.code&&null!=item.name&&null!=item.price&&item.minimumQuantity&&null!=item.quantity&&(item=new cartItem(item.code,item.name,item.price,item.minimumQuantity,item.quantity),this.items.push(item))}}catch(err){}},shoppingCart.prototype.saveItems=function(){null!=localStorage&&null!=JSON&&(localStorage[this.cartName+"_items"]=JSON.stringify(this.items))},shoppingCart.prototype.addItem=function(code,name,price,minimumQuantity,quantity){if(minimumQuantity=this.toNumber(minimumQuantity),quantity=this.toNumber(quantity),0!=quantity){for(var found=!1,i=0;i<this.items.length&&!found;i++){var item=this.items[i];item.code==code&&(found=!0,item.quantity=this.toNumber(item.quantity+quantity),item.quantity<=0&&this.items.splice(i,1))}if(!found){var item=new cartItem(code,name,price,minimumQuantity,quantity);this.items.push(item)}this.saveItems()}},shoppingCart.prototype.getTotalPrice=function(code){for(var total=0,i=0;i<this.items.length;i++){var item=this.items[i];(null==code||item.code==code)&&(total+=this.toNumber(item.quantity*item.price))}return total},shoppingCart.prototype.getTotalCount=function(code){for(var count=0,i=0;i<this.items.length;i++){var item=this.items[i];(null==code||item.code==code)&&(count+=this.toNumber(item.quantity))}return count},shoppingCart.prototype.clearItems=function(){this.items=[],this.saveItems()},shoppingCart.prototype.addCheckoutParameters=function(serviceName,merchantID,options){if("PayPal"!=serviceName)throw"serviceName must be 'PayPal'.";if(null==merchantID)throw"A merchantID is required in order to checkout.";this.checkoutParameters[serviceName]=new checkoutParameters(serviceName,merchantID,options)},shoppingCart.prototype.checkout=function(serviceName,clearCart){if(null==serviceName){var p=this.checkoutParameters[Object.keys(this.checkoutParameters)[0]];serviceName=p.serviceName}if(null==serviceName)throw"Use the 'addCheckoutParameters' method to define at least one checkout service.";var parms=this.checkoutParameters[serviceName];if(null==parms)throw"Cannot get checkout parameters for '"+serviceName+"'.";switch(parms.serviceName){case"PayPal":this.checkoutPayPal(parms,clearCart);break;default:throw"Unknown checkout service: "+parms.serviceName}},shoppingCart.prototype.checkoutPayPal=function(parms,clearCart){for(var data={cmd:"_cart",business:parms.merchantID,upload:"1",rm:"2",charset:"utf-8"},i=0;i<this.items.length;i++){var item=this.items[i],ctr=i+1;data["item_number_"+ctr]=item.code,data["item_name_"+ctr]=item.name,data["quantity_"+ctr]=item.quantity,data["amount_"+ctr]=item.price.toFixed(2),data.currency_code="USD",data.shipping_1=1.75,data.tax_cart=15*Math.round(100*this.getTotalPrice()/100)/100}var form=$("<form/></form>");form.attr("action","#/checkoutForm"),form.attr("style","display:none;"),this.addFormFields(form,data),this.addFormFields(form,parms.options),$("body").append(form),this.clearCart=null==clearCart||clearCart,form.submit(),form.remove()},shoppingCart.prototype.addFormFields=function(form,data){null!=data&&$.each(data,function(name,value){if(null!=value){var input=$("<input></input>").attr("type","hidden").attr("name",name).val(value);form.append(input)}})},shoppingCart.prototype.toNumber=function(value){return value=1*value,isNaN(value)?0:value},smartApp.factory("BannerRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function BannerRepository(){AbstractRepository.call(this,Restangular,"banner")}return AbstractRepository.extend(BannerRepository),new BannerRepository}]).factory("ShowBanners",function(Restangular){return Restangular.allUrl("getBanners")}),smartApp.factory("AuthService",function($http,$window,Session,$cookieStore,$store){var authService={};return authService.login=function(credentials){return $http.post(dbSever+"oauth/access_token",credentials).then(function(res){return $cookieStore.put("access_token",res.data.access_token),$cookieStore.put("refresh_token",res.data.refresh_token),$store.set("access_token",res.data.access_token),$store.set("refresh_token",res.data.refresh_token),res.data})},authService.logOut=function(){$cookieStore.remove("access_token"),$cookieStore.remove("refresh_token"),$store.remove("access_token"),$store.remove("refresh_token")},authService.isAuthenticated=function(){return!!Session.userId},authService.isAuthorized=function(authorizedRoles){return angular.isArray(authorizedRoles)||(authorizedRoles=[authorizedRoles]),-1!==authorizedRoles.indexOf(Session.userRole)},authService}).service("Session",function(){this.create=function(sessionId,userId,userRole){this.id=sessionId,this.userId=userId,this.userRole=userRole},this.destroy=function(){this.id=null,this.userId=null,this.userRole=null}}),smartApp.factory("UserRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function UserRepository(){AbstractRepository.call(this,Restangular,"user")}return AbstractRepository.extend(UserRepository),new UserRepository}]).factory("BannedUser",function(Restangular){return Restangular.allUrl("banUser")}).factory("UnBannedUser",function(Restangular){return Restangular.allUrl("unBanUser")}).factory("UserCreate",function(Restangular){return Restangular.allUrl("userCreate")}).factory("CurrentUser",function(Restangular){return Restangular.one("getCurrentUser")}),smartApp.factory("MeasurementRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function MeasurementRepository(){AbstractRepository.call(this,Restangular,"measurement")}return AbstractRepository.extend(MeasurementRepository),new MeasurementRepository}]),smartApp.factory("TimelineRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function TimelineRepository(){AbstractRepository.call(this,Restangular,"timeline")}return AbstractRepository.extend(TimelineRepository),new TimelineRepository}]).factory("ProcessUpdate",function(Restangular){return Restangular.allUrl("processUpdate")}),smartApp.factory("BrandRepository",["Restangular","AbstractRepository",function(Restangular,AbstractRepository){function BrandRepository(){AbstractRepository.call(this,Restangular,"brand")}return AbstractRepository.extend(BrandRepository),new BrandRepository}]),smartApp.controller("MainCtrl",MainCtrl).controller("AboutCtrl",AboutCtrl).controller("ContactUsCtrl",ContactUsCtrl).controller("LoginCtrl",LoginCtrl).controller("LoginPopUpCtrl",LoginPopUpCtrl).controller("RegisterCtrl",RegisterCtrl).controller("ForgetPasswordCtrl",ForgetPasswordCtrl).controller("RegisterConfirmationCtrl",RegisterConfirmationCtrl).controller("StaffManagementCtrl",StaffManagementCtrl).controller("StaffEditCtrl",StaffEditCtrl).controller("StaffCreateCtrl",StaffCreateCtrl).controller("UserBanCtrl",UserBanCtrl).controller("ProfileCtrl",ProfileCtrl).controller("AboutCtrl",AboutCtrl).controller("ProductCtrl",ProductCtrl).controller("ProductCreateCtrl",ProductCreateCtrl).controller("ProductCreateSuccessfullyModalInstanceCtrl",ProductCreateSuccessfullyModalInstanceCtrl).controller("ProductEditCtrl",ProductEditCtrl).controller("CategoryCtrl",CategoryCtrl).controller("MoreOrderModalInstanceCtrl",MoreOrderModalInstanceCtrl).controller("VendorCtrl",VendorCtrl).controller("VendorCreateCtrl",VendorCreateCtrl).controller("VendorEditCtrl",VendorEditCtrl).controller("UserManagementsCtrl",UserManagementsCtrl).controller("NewUserManagementsCtrl",NewUserManagementsCtrl).controller("OrdersCtrl",OrdersCtrl).controller("AllOrdersCtrl",OrdersCtrl).controller("MoreDetailsOrderModalInstanceCtrl",MoreDetailsOrderModalInstanceCtrl).controller("userDetailsOrderModalInstanceCtrl",userDetailsOrderModalInstanceCtrl).controller("MainPictureImageModalInstanceCtrl",MainPictureImageModalInstanceCtrl).controller("DeleteConfirmModalInstanceCtrl",DeleteConfirmModalInstanceCtrl).controller("StoreCtrl",StoreCtrl).controller("ItemsDetailCtrl",ItemsDetailCtrl).controller("CartCtrl",CartCtrl).controller("CheckOutCtrl",CheckOutCtrl).controller("InvoiceCtrl",InvoiceCtrl).controller("myOrderCtrl",myOrderCtrl).controller("SearchByTagsCtrl",SearchByTagsCtrl).controller("bannersCtrl",bannersCtrl).controller("SendEmailSuccessCtrl",SendEmailSuccessCtrl).controller("OrderTimelineCtrl",OrderTimelineCtrl).controller("UpdateStatusCtrl",UpdateStatusCtrl).controller("BrandCtrl",BrandCtrl).controller("BrandshowCtrl",BrandshowCtrl).controller("BrandshowItemCtrl",BrandshowItemCtrl).controller("ServiceCtrl",ServiceCtrl).controller("FeedbackCtrl",FeedbackCtrl);